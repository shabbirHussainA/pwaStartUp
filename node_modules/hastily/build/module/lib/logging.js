import debug from 'debug';
import pino from 'pino';
export function createLogger(label) {
    // Respect the usual DEBUG=hastily:* environment vars
    const name = `hastily:${label}`;
    const debugging = debug(name).enabled;
    const level = debugging
        ? 'debug'
        : process.env.NODE_ENV === 'production'
            ? 'error'
            : 'warn';
    const options = {
        name,
        level,
        prettyPrint: debugging,
        serializers: {
            ...pino.stdSerializers,
            req: (req) => req.originalUrl,
        },
    };
    return pino(options, pino.destination(2));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9nZ2luZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvbG9nZ2luZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEtBQUssTUFBTSxPQUFPLENBQUM7QUFDMUIsT0FBTyxJQUErQixNQUFNLE1BQU0sQ0FBQztBQUduRCxNQUFNLFVBQVUsWUFBWSxDQUFDLEtBQWE7SUFDeEMscURBQXFEO0lBQ3JELE1BQU0sSUFBSSxHQUFHLFdBQVcsS0FBSyxFQUFFLENBQUM7SUFDaEMsTUFBTSxTQUFTLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQztJQUN0QyxNQUFNLEtBQUssR0FBRyxTQUFTO1FBQ3JCLENBQUMsQ0FBQyxPQUFPO1FBQ1QsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxLQUFLLFlBQVk7WUFDdkMsQ0FBQyxDQUFDLE9BQU87WUFDVCxDQUFDLENBQUMsTUFBTSxDQUFDO0lBQ1gsTUFBTSxPQUFPLEdBQWtCO1FBQzdCLElBQUk7UUFDSixLQUFLO1FBQ0wsV0FBVyxFQUFFLFNBQVM7UUFDdEIsV0FBVyxFQUFFO1lBQ1gsR0FBRyxJQUFJLENBQUMsY0FBYztZQUN0QixHQUFHLEVBQUUsQ0FBQyxHQUFZLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxXQUFXO1NBQ3ZDO0tBQ0YsQ0FBQztJQUVGLE9BQU8sSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDNUMsQ0FBQyJ9