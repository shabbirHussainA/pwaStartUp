"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.createLogger = void 0;
const debug_1 = __importDefault(require("debug"));
const pino_1 = __importDefault(require("pino"));
function createLogger(label) {
    // Respect the usual DEBUG=hastily:* environment vars
    const name = `hastily:${label}`;
    const debugging = debug_1.default(name).enabled;
    const level = debugging
        ? 'debug'
        : process.env.NODE_ENV === 'production'
            ? 'error'
            : 'warn';
    const options = {
        name,
        level,
        prettyPrint: debugging,
        serializers: Object.assign(Object.assign({}, pino_1.default.stdSerializers), { req: (req) => req.originalUrl }),
    };
    return pino_1.default(options, pino_1.default.destination(2));
}
exports.createLogger = createLogger;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9nZ2luZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvbG9nZ2luZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxrREFBMEI7QUFDMUIsZ0RBQW1EO0FBR25ELFNBQWdCLFlBQVksQ0FBQyxLQUFhO0lBQ3hDLHFEQUFxRDtJQUNyRCxNQUFNLElBQUksR0FBRyxXQUFXLEtBQUssRUFBRSxDQUFDO0lBQ2hDLE1BQU0sU0FBUyxHQUFHLGVBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUM7SUFDdEMsTUFBTSxLQUFLLEdBQUcsU0FBUztRQUNyQixDQUFDLENBQUMsT0FBTztRQUNULENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsS0FBSyxZQUFZO1lBQ3ZDLENBQUMsQ0FBQyxPQUFPO1lBQ1QsQ0FBQyxDQUFDLE1BQU0sQ0FBQztJQUNYLE1BQU0sT0FBTyxHQUFrQjtRQUM3QixJQUFJO1FBQ0osS0FBSztRQUNMLFdBQVcsRUFBRSxTQUFTO1FBQ3RCLFdBQVcsa0NBQ04sY0FBSSxDQUFDLGNBQWMsS0FDdEIsR0FBRyxFQUFFLENBQUMsR0FBWSxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsV0FBVyxHQUN2QztLQUNGLENBQUM7SUFFRixPQUFPLGNBQUksQ0FBQyxPQUFPLEVBQUUsY0FBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzVDLENBQUM7QUFwQkQsb0NBb0JDIn0=