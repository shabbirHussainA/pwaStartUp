{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{NYgU:function(e,t,a){\"use strict\"\na.r(t),a.d(t,\"default\",function(){return I})\nvar n,i,s=a(\"q1tI\"),r=a.n(s),l=a(\"dDsW\"),c=a(\"kriW\"),o=a(\"8UhI\"),u=a(\"J3e4\"),m=a(\"yXPU\"),b=a.n(m),d=a(\"+TN3\"),g=a(\"pZLH\"),f=a(\"y1Xp\"),p=a(\"FITH\"),y=a(\"VkAN\"),h=a.n(y),E=a(\"UYTu\"),S=Object(E.a)(n||(n=h()([\"\\n    mutation SetNewsletterSubscription($isSubscribed: Boolean!) {\\n        updateCustomer(input: { is_subscribed: $isSubscribed }) {\\n            # eslint-disable-next-line @graphql-eslint/require-id-when-available\\n            customer {\\n                is_subscribed\\n            }\\n        }\\n    }\\n\"]))),v={getCustomerSubscriptionQuery:Object(E.a)(i||(i=h()([\"\\n    query GetCustomerSubscription {\\n        # eslint-disable-next-line @graphql-eslint/require-id-when-available\\n        customer {\\n            is_subscribed\\n        }\\n    }\\n\"]))),setNewsletterSubscriptionMutation:S},j=e=>{var{afterSubmit:t}=e,a=Object(f.a)(v,e.operations),{getCustomerSubscriptionQuery:n,setNewsletterSubscriptionMutation:i}=a,[{isSignedIn:r}]=Object(p.b)(),{data:l,error:c}=Object(d.a)(n,{skip:!r}),o=Object(s.useMemo)(()=>{if(l)return{isSubscribed:l.customer.is_subscribed}},[l]),[u,{error:m,loading:y}]=Object(g.a)(i)\nreturn{formErrors:[m,c],initialValues:o,handleSubmit:Object(s.useCallback)(function(){var e=b()(function*(e){try{yield u({variables:e})}catch(e){return}t&&t()})\nreturn function(t){return e.apply(this,arguments)}}(),[u,t]),isDisabled:y}},P=a(\"ACyH\"),N=a(\"Ri9G\"),T=a(\"7X3U\"),O=a(\"dTQg\"),C=a(\"UPvi\"),x=a(\"DUu4\"),w=a(\"LboF\"),M=a.n(w),V=a(\"kEv4\"),k={injectType:\"singletonStyleTag\",insert:\"head\",singleton:!0},q=(M()(V.a,k),V.a.locals||{}),I=e=>{var{formatMessage:t}=Object(l.a)(),a=Object(f.a)(q,e.classes),[,{addToast:n}]=Object(u.a)(),i=Object(s.useCallback)(()=>{n({type:\"info\",message:t({id:\"communicationsPage.preferencesText\",defaultMessage:\"Your preferences have been updated.\"}),timeout:5e3})},[n,t]),m=j({afterSubmit:i}),{formErrors:b,handleSubmit:d,initialValues:g,isDisabled:p}=m\nif(!g)return x.a\nvar y=t({id:\"communicationsPage.title\",defaultMessage:\"Communications\"})\nreturn r.a.createElement(\"div\",{className:a.root},r.a.createElement(C.b,null,y),r.a.createElement(\"div\",{className:a.title},r.a.createElement(c.a,{id:\"communicationsPage.communicationsText\",defaultMessage:\"Communications\"})),r.a.createElement(\"p\",null,r.a.createElement(c.a,{id:\"communicationsPage.optInText\",defaultMessage:\"We'd like to stay in touch. Please check the boxes next to the communications you'd like to receive.\"})),r.a.createElement(O.a,{errors:b}),r.a.createElement(o.b,{className:a.form,onSubmit:d,initialValues:g},r.a.createElement(T.a,{id:\"isSubscribed\",label:t({id:\"communicationsPage.eNewsletterText\",defaultMessage:\"Venia E-Newsletter\"})},r.a.createElement(N.a,{field:\"isSubscribed\",label:t({id:\"communicationsPage.subscribeText\",defaultMessage:\"Stay on the cutting edge of fashion; subscribe to the monthly Venia Newsletter.\"})})),r.a.createElement(\"div\",{className:a.buttonsContainer},r.a.createElement(P.a,{disabled:p,type:\"submit\",priority:\"high\"},t(p?{id:\"communicationsPage.savingText\",defaultMessage:\"Saving\"}:{id:\"communicationsPage.changesText\",defaultMessage:\"Save Changes\"})))))}},Ri9G:function(e,t,a){\"use strict\"\nvar n=a(\"pVnL\"),i=a.n(n),s=a(\"QILm\"),r=a.n(s),l=a(\"q1tI\"),c=a.n(l),o=a(\"17x9\"),u=a(\"8UhI\"),m=a(\"c3RJ\"),b=a(\"y1Xp\"),d=a(\"gpca\"),g=a(\"/Gi5\"),f=a(\"ZRVi\"),p=a(\"LboF\"),y=a.n(p),h=a(\"jMiJ\"),E={injectType:\"singletonStyleTag\",insert:\"head\",singleton:!0},S=(y()(h.a,E),h.a.locals||{}),v=[\"ariaLabel\",\"classes\",\"field\",\"fieldValue\",\"id\",\"label\",\"message\"],j=c.a.createElement(g.a,null),P=c.a.createElement(f.a,null),N=e=>{var{ariaLabel:t,classes:a,field:n,fieldValue:s,id:o,label:g,message:f}=e,p=r()(e,v),y=Object(u.i)(n),h=Object(m.a)(n),E=Object(b.a)(S,a),N=h.value?j:P\nreturn Object(l.useEffect)(()=>{null!=s&&s!==h.value&&y.setValue(s)},[y,h.value,s]),c.a.createElement(l.Fragment,null,c.a.createElement(\"label\",{\"aria-label\":t,className:E.root,htmlFor:o},c.a.createElement(u.a,i()({},p,{className:E.input,field:n,id:o})),c.a.createElement(\"span\",{className:E.icon},N),c.a.createElement(\"span\",{className:E.label},g)),c.a.createElement(d.a,{fieldState:h},f))}\nt.a=N\nN.propTypes={ariaLabel:o.string,classes:Object(o.shape)({icon:o.string,input:o.string,label:o.string,message:o.string,root:o.string}),field:o.string.isRequired,id:o.string,label:o.node.isRequired,message:o.node}},kEv4:function(e,t,a){\"use strict\"\nvar n=a(\"JPst\"),i=a.n(n)()(function(e){return e[1]})\ni.push([e.i,\".communicationsPage-root-BcS {\\n}\\n\\n.communicationsPage-title-yCV {\\n}\\n\\n.communicationsPage-form-Na6 {\\n}\\n\\n.communicationsPage-buttonsContainer-YRT {\\n}\\n\",\"\"]),i.locals={root:\"communicationsPage-root-BcS grid gap-y-md px-sm py-md lg_px-lg\",title:\"communicationsPage-title-yCV font-bold font-serif justify-self-center\",form:\"communicationsPage-form-Na6 grid gap-y-md\",buttonsContainer:\"communicationsPage-buttonsContainer-YRT flex justify-center lg_justify-start\"},t.a=i}}])\n","extractedComments":[]}