{"version":3,"sources":["webpack://informed/webpack/universalModuleDefinition","webpack://informed/webpack/bootstrap","webpack://informed/./node_modules/process/browser.js","webpack://informed/./src/debug.js","webpack://informed/./src/ObjectMap.js","webpack://informed/./src/Context.js","webpack://informed/./src/hooks/useFormApi.js","webpack://informed/./src/hooks/useStateWithGetter.js","webpack://informed/./src/utils.js","webpack://informed/./src/hooks/useIsomorphicLayoutEffect.js","webpack://informed/./src/hooks/useCursorPosition.js","webpack://informed/./src/hooks/useField.js","webpack://informed/./src/HOC/asField.js","webpack://informed/./src/components/form-fields/Text.js","webpack://informed/./src/components/form-fields/TextArea.js","webpack://informed/./src/components/form-fields/Select.js","webpack://informed/./src/components/form-fields/Checkbox.js","webpack://informed/./src/HOC/withRadioGroup.js","webpack://informed/./src/components/form-fields/Radio.js","webpack://informed/./src/components/form-fields/RadioGroup.js","webpack://informed/./src/hooks/useArrayFieldApi.js","webpack://informed/./src/components/form-fields/AddButton.js","webpack://informed/./src/hooks/useArrayFieldItemApi.js","webpack://informed/./src/components/form-fields/RemoveButton.js","webpack://informed/./src/hooks/useArrayField.js","webpack://informed/./src/hooks/useScopedApi.js","webpack://informed/./src/hooks/useFormState.js","webpack://informed/./src/components/Relevant.js","webpack://informed/./src/components/ArrayField.js","webpack://informed/./src/components/FormComponents.js","webpack://informed/./src/components/FormFields.js","webpack://informed/./src/components/form-fields/ArrayField.js","webpack://informed/./src/fieldMap.js","webpack://informed/./src/FormController.js","webpack://informed/./src/components/FormProvider.js","webpack://informed/./src/hooks/useForm.js","webpack://informed/./src/components/Form.js","webpack://informed/./src/components/Scope.js","webpack://informed/./src/components/FormState.js","webpack://informed/./src/hooks/useMultistep.js","webpack://informed/./src/hooks/useMultistepState.js","webpack://informed/./src/hooks/useMultistepApi.js","webpack://informed/./src/hooks/useMultistepStep.js","webpack://informed/./src/components/Multistep.js","webpack://informed/./src/components/FormField.js","webpack://informed/./src/components/SchemaFields.js","webpack://informed/./src/HOC/withFormApi.js","webpack://informed/./src/HOC/withFormState.js","webpack://informed/./src/hooks/useFieldApi.js","webpack://informed/./src/hooks/useFieldState.js","webpack://informed/./src/HOC/withFieldState.js","webpack://informed/./src/HOC/withFieldApi.js","webpack://informed/./src/components/form-fields/Option.js","webpack://informed/./src/index.js","webpack://informed/external \"events\"","webpack://informed/external \"react\""],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","setTimeout","e","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","length","concat","drainQueue","timeout","len","run","marker","runClearTimeout","Item","array","noop","nextTick","args","Array","arguments","push","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","selectColor","namespace","colors","hash","charCodeAt","Math","abs","formatNodeArgs","config","useColors","color","prefix","split","join","formatBrowserArgs","index","lastC","replace","match","splice","browserColors","createLogger","unshift","matches","namespaces","map","RegExp","slice","some","regex","test","type","__nwjs","localStorage","getItem","error","DEBUG","formatArgs","loadBrowser","debug","Debug","ldtoPath","path","String","filter","Boolean","ldget","obj","defaultValue","result","reduce","res","undefined","parentPath","ldhas","pPath","pathKey","parentObj","ldset","val","arr","Number","isInteger","isArray","ldunset","found","pathToArrayElem","pathArray","cleanup","every","JSON","stringify","ObjectMap","props","keys","ldvalues","pullOut","ldpullAt","FormRegisterContext","React","createContext","register","deregister","setValue","setTouched","setError","update","getField","expectRemoval","getInitialValue","FormStateContext","FormApiContext","getFullField","getValues","getOptions","setInitialValue","getDerrivedValue","getSavedValue","removeSavedState","GroupContext","ArrayFieldStateContext","ArrayFieldApiContext","ArrayFieldItemApiContext","ArrayFieldItemStateContext","MultistepStateContext","MultistepApiContext","MultistepStepContext","useFormApi","useContext","useStateWithGetter","initial","ref","useRef","mounted","useState","state","setState","current","useEffect","getChildDisplayName","WrappedComponent","displayName","yupToFormErrors","yupError","errors","inner","set","message","err","validateYupSchema","schema","values","validateSync","abortEarly","yupToFormError","validateYupField","validateAjvSchema","validate","data","forEach","dataPath","keyword","params","missingProperty","uuidv4","random","toString","debounce","func","wait","later","computeFieldFromProperty","propertyName","uiControl","informedProps","inputProps","uiBefore","uiAfter","oneOf","items","schemaEnum","label","min","minimum","max","maximum","minLength","maxLength","pattern","subProperties","properties","id","field","componentType","options","option","computeFieldsFromSchema","onlyValidateSchema","allOf","propertyOrder","fields","sort","a","b","aIndex","indexOf","bIndex","getSchemaPathFromJsonPath","jsonPath","schemaPath","informedFormat","frmtr","offset","formatter","char","getFormatter","prefixLength","findIndex","v","suffixStart","reverse","formatted","chars","vIndex","start","matchIndex","mi","matching","matchingIndex","pastPrefix","matcher","curChar","useIsomorphicLayoutEffect","window","document","createElement","useLayoutEffect","useCursorPosition","inputRef","maintainCursor","cursor","setCursor","getCursor","cursorOffset","setCursorOffset","getCursorOffset","cursorLoc","setSelectionRange","logger","initializeValue","mask","parser","initialize","initializeMask","format","parse","generateValidationFunction","validationFunc","validationSchema","required","validateRequired","generateOnChange","fieldType","onChange","multiple","setter","target","selected","from","checked","generateOnBlur","onBlur","generateValue","maskedValue","generateFieldType","useField","fieldProps","userRef","asyncValidate","maskWithCursorOffset","initialValue","validateOnChange","validateOnBlur","validateOnMount","asyncValidateOnBlur","maskOnBlur","allowEmptyString","onValueChange","notify","keepState","shadow","step","formController","userRelevant","relevant","keepStateIfRelevant","userProps","fieldId","updater","multistepContext","inMultistep","formApi","fieldApiRef","initialRenerRef","fieldObjectRef","getFormApi","initVal","initTouched","formInitialValue","savedState","touched","setVal","getTheVal","setErr","getErr","setTouch","getTouch","setMaskedValue","initialValueRef","fieldRef","prevFieldRef","internalRef","useMemo","relevantFunc","rel","ff","isRelevant","setIsRelevant","getIsRelevant","multistepRelevant","checkRelevant","newRel","reset","getVal","preventUpdate","getStep","formOptions","maskedVal","allowEmptyStrings","selectionStart","fieldValidate","fieldAsyncValidate","fieldApi","getValue","getTouched","getError","getFieldState","fieldState","fullField","style","border","borderWidth","borderStyle","borderColor","borderImage","shouldUpdate","render","children","changeHandler","blurHandler","hookedValue","informed","asField","Component","forwardRef","forwardedRef","Text","rest","background","htmlFor","TextArea","Select","selectRef","disabled","Checkbox","withRadioGroup","Consumer","radioGroupApi","radioGroupState","Radio","groupValue","groupOnChange","groupOnBlur","RadioGroup","Provider","groupContext","useArrayFieldApi","AddButton","add","onClick","useArrayFieldItemApi","remove","useArrayField","arrayFieldApiRef","fieldsById","Map","initialVals","keptValues","initialValues","setInitialValues","getInitialValues","initialKeys","setKeys","getKeys","validateWithLength","onChangeHandler","fieldName","emitter","swap","newKeys","console","warn","addWithInitialValue","newInitialValues","arrayFieldItemApi","initVals","arrayFieldItemState","arrayFieldApi","resetKeys","arrayFieldState","wrappedUpdator","fld","useScopedApi","scope","buildScopedFormApi","useFormState","Relevant","when","ArrayField","ArrayFieldWrapper","ArrayFieldItem","scopedApi","lastIndexOf","itemState","getState","initialRender","arrayFieldItemApiValue","arrayFieldItemStateValue","Items","FormComponents","components","fieldMap","comp","FormFields","schemaField","conditional","subSchema","then","conditions","condition","Fragment","select","input","textarea","checkbox","radio","RemoveButton","FormController","ajv","allErrors","ajvValidate","compile","defaultFieldMap","fieldsByName","fieldByName","onScreen","expectedRemovals","pulledOut","savedValues","pristine","dirty","invalid","submits","validating","submitting","dummyField","getErrors","setStep","back","next","setCurrent","setFormError","submitForm","screenValid","keyDown","getFormState","setValues","resetField","fieldExists","validateField","validated","f","touch","currentError","valid","component","Current","prevComponent","nextComponent","notifier","JSPAN","toNotify","empty","entries","getAllTouched","has","validateFields","keyCode","preventEnter","preventDefault","dontPreventDefault","alreadyRegistered","magicValue","size","expectedRemoval","includedKey","find","includes","isExpected","oldName","oldField","EventEmitter","FormProvider","formState","useForm","getApi","apiRef","onReset","onSubmit","onSubmitFailure","formControllerOptions","setOptions","setFormState","onResetHandler","onSubmitHandler","onValueHandler","onFailureHandler","Form","renderProp","onKeyDown","Scope","formRegister","scopedFormApi","scopedRegister","buildScopedRegister","FormState","displayState","useMultistep","initialStep","multistepApiRef","stepsByName","steps","multistepState","setMultistepState","getMultistepState","multistepApi","getCurrentStep","api","getNext","nextStep","prev","previous","getPrevious","previousStep","useMultistepState","useMultistepApi","useMultistepStep","isCurrent","nextRef","prevRef","relevantRef","multistep","Multistep","context","Step","FormField","SchemaFields","withFormApi","withFormState","useFieldApi","exists","buildFieldApi","useFieldState","buildFieldState","withFieldState","withFieldApi","Option","Input","require"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"informed\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"informed\"] = factory();\n\telse\n\t\troot[\"informed\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/**\n * \n * I stole most of this code from the debug lib\n * https://github.com/visionmedia/debug\n * \n * Just wanted it to be easy to debug without relying on the dependency!\n */\n\n\n/**\n\t* Selects a color for a debug namespace\n  * @param {String} namespace The namespace string for the for the debug instance to be colored\n  * @param {String} colors color pallette to choose from\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\nfunction selectColor(namespace, colors) {\n  let hash = 0;\n\n  for (let i = 0; i < namespace.length; i++) {\n    hash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return colors[Math.abs(hash) % colors.length];\n}\n\n/**\n * Adds ANSI color escape codes if enabled.\n *\n * @api public\n */\n\nfunction formatNodeArgs(args, config) {\n\n  const name = config.namespace;\n\n  if (config.useColors) {\n    const c = config.color;\n    const colorCode = '\\u001B[3' + (c < 8 ? c : '8;5;' + c);\n    const prefix = `  ${colorCode};1m${name} \\u001B[0m`;\n    args[0] = prefix + args[0].split('\\n').join('\\n' + prefix);\n  } else {\n    args[0] = name + ' ' + args[0];\n  }\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n */\n\nfunction formatBrowserArgs(args, config) {\n\n  args[0] = (config.useColors ? '%c' : '') + config.namespace;\n\n  if (!config.useColors) {\n    return;\n  }\n\n  const c = 'color: ' + config.color;\n\n  // The final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  let index = 0;\n  let lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, match => {\n    if (match === '%%') {\n      return;\n    }\n    index++;\n    if (match === '%c') {\n      // We only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n\nconst browserColors = [\n  '#0000CC',\n  '#0000FF',\n  '#0033CC',\n  '#0033FF',\n  '#0066CC',\n  '#0066FF',\n  '#0099CC',\n  '#0099FF',\n  '#00CC00',\n  '#00CC33',\n  '#00CC66',\n  '#00CC99',\n  '#00CCCC',\n  '#00CCFF',\n  '#3300CC',\n  '#3300FF',\n  '#3333CC',\n  '#3333FF',\n  '#3366CC',\n  '#3366FF',\n  '#3399CC',\n  '#3399FF',\n  '#33CC00',\n  '#33CC33',\n  '#33CC66',\n  '#33CC99',\n  '#33CCCC',\n  '#33CCFF',\n  '#6600CC',\n  '#6600FF',\n  '#6633CC',\n  '#6633FF',\n  '#66CC00',\n  '#66CC33',\n  '#9900CC',\n  '#9900FF',\n  '#9933CC',\n  '#9933FF',\n  '#99CC00',\n  '#99CC33',\n  '#CC0000',\n  '#CC0033',\n  '#CC0066',\n  '#CC0099',\n  '#CC00CC',\n  '#CC00FF',\n  '#CC3300',\n  '#CC3333',\n  '#CC3366',\n  '#CC3399',\n  '#CC33CC',\n  '#CC33FF',\n  '#CC6600',\n  '#CC6633',\n  '#CC9900',\n  '#CC9933',\n  '#CCCC00',\n  '#CCCC33',\n  '#FF0000',\n  '#FF0033',\n  '#FF0066',\n  '#FF0099',\n  '#FF00CC',\n  '#FF00FF',\n  '#FF3300',\n  '#FF3333',\n  '#FF3366',\n  '#FF3399',\n  '#FF33CC',\n  '#FF33FF',\n  '#FF6600',\n  '#FF6633',\n  '#FF9900',\n  '#FF9933',\n  '#FFCC00',\n  '#FFCC33'\n];\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the debug modes\n * @api private\n */\nfunction loadBrowser() {\n  let namespaces;\n  try {\n    namespaces = localStorage.getItem('debug');\n  } catch (error) {\n    // Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!namespaces && typeof process !== 'undefined' && 'env' in process) {\n    namespaces = process.env.DEBUG;\n  }\n\n  return { \n    namespaces: namespaces || '', \n    colors: browserColors,\n    useColors: true,\n    formatArgs: formatBrowserArgs\n  };\n} \n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the debug modes\n * @api private\n */\nfunction loadNode() {\n  return { \n    namespaces: process.env.DEBUG || '',\n    colors: [6, 2, 3, 4, 5, 1], \n    useColors: true, \n    formatArgs: formatNodeArgs\n  };\n}\n\n\nfunction createLogger(prefix = null, config) {\n  return function(...args) {\n\n    if (prefix){\n      args.unshift(prefix);\n    }\n\n    // Create a namespace regex for each namespace\n    const matches = config.namespaces.split(',').map(( namespace )=>{\n      // Remove wildcard and add to regex if wildcard\n      if( namespace[namespace.length - 1] === '*' ){\n        return new RegExp('^' + namespace.slice(0, namespace.length-1) + '.*' + '$');\n      }\n      return new RegExp('^' + namespace + '$');\n    });\n    \n    // Does the prefix match a namespace\n    const match = matches.some((regex)=>{\n      return regex.test(prefix);\n    });\n\n    const conf = {\n      color: selectColor( prefix, config.colors ),\n      namespace: prefix, \n      useColors: config.useColors\n    };\n\n    if (process.env.NODE_ENV !== 'production' && match ) {\n      config.formatArgs(args, conf);\n      console.log(...args);\n    }\n  };\n}\n\nfunction nodeLogger(prefix) {\n  return createLogger(prefix, loadNode());\n}\n\nfunction browserLogger(prefix) {\n  return createLogger(prefix, loadBrowser());\n}\n\n/**\n * Detect Electron renderer / nwjs process, which is node, but we should\n * treat as a browser.\n */\n\nif (typeof process === 'undefined' || process.type === 'renderer' || process.browser === true || process.__nwjs) {\n  module.exports = browserLogger;\n} else {\n  module.exports = nodeLogger;\n}","import Debug from './debug';\nconst debug = Debug('informed:ObjMap' + '\\t');\n\n/* -------------------- toPath -------------------- */\n\nconst ldtoPath = (path = '') => {\n  return String.prototype.replace\n    .call(path, /\\['(.+?)'\\]/g, '.$1')\n    .split(/[,[\\].]+?/)\n    .filter(Boolean);\n};\n\n/* --------------------- get --------------------- */\n\nconst ldget = (obj, path = '', defaultValue) => {\n  const result = String.prototype.replace\n    .call(path, /\\['(.+?)'\\]/g, '.$1')\n    .split(/[,[\\].]+?/)\n    .filter(Boolean)\n    .reduce(\n      (res, key) => (res !== null && res !== undefined ? res[key] : res),\n      obj\n    );\n  return result === undefined || result === obj ? defaultValue : result;\n};\n\n/* --------------------- has --------------------- */\n\n// foo -->\n// foo.bar --> foo\n// foo.bar[3] --> foo.bar\n// foo.bar.baz[2].raz.taz[5].laz --> foo.bar.baz[2].raz.taz[5]\nconst parentPath = path => {\n  return `.${path}`.replace(/(.*)[.[].*/, '$1').replace(/\\./, '');\n};\n\n// foo --> foo\n// foo.bar --> bar\n// foo.bar[3] --> [3]\n// foo.bar.baz[2].raz.taz[5].laz --> laz\nconst pathKey = path => {\n  return path.replace(parentPath(path), '').replace(/\\./, '');\n};\n\nconst ldhas = (obj, path) => {\n  const pPath = parentPath(path);\n  const key = pathKey(path);\n  // If we have parent path then get the object at that location\n  // .. otherwise its the root object\n  const parentObj = pPath ? ldget(obj, pPath) : obj;\n  // If its [3] turn key into 3\n  return !!(\n    parentObj &&\n    Object.hasOwnProperty.call(parentObj, key.replace(/\\[(.*)\\]/, '$1'))\n  );\n};\n\n/* --------------------- set --------------------- */\n\nconst ldset = (obj, path = '', val) => {\n  String.prototype.replace\n    .call(path, /\\['(.+?)'\\]/g, '.$1')\n    .split(/[,[\\].]+?/)\n    .filter(Boolean)\n    .reduce((res, key, i, arr) => {\n      //console.log('RES', res, 'Key', key, 'I', i, 'Arr', arr, 'OBJ', obj);\n      // At the leaf set the value\n      if (i === arr.length - 1) {\n        res[key] = val;\n        return res[key];\n      }\n      // Initialize to new array or object if needed\n      if (res[key] === undefined) {\n        if (Number.isInteger(+arr[i + 1])) {\n          res[key] = [];\n        } else {\n          res[key] = {};\n        }\n        return res[key];\n      }\n      // Exception for if the value is changeing to an array\n      if (Number.isInteger(+arr[i + 1]) && !Array.isArray(res[key])) {\n        res[key] = [];\n      }\n      //TODO exception for if object ??\n\n      // Otherwise keep whats there\n      return res[key];\n    }, obj);\n};\n\n/* --------------------- unset --------------------- */\n\nconst ldunset = (obj, path = '') => {\n  let found = false;\n  String.prototype.replace\n    .call(path, /\\['(.+?)'\\]/g, '.$1')\n    .split(/[,[\\].]+?/)\n    .filter(Boolean)\n    .reduce((res, key, i, arr) => {\n      // Base case res is undefined\n      if (res === undefined) {\n        return res;\n      }\n      // At the leaf delete the value\n      if (i === arr.length - 1) {\n        delete res[key];\n        found = true;\n        return res[key];\n      }\n      // Otherwise keep going\n      return res[key];\n    }, obj);\n  return found;\n};\n\n/* --------------------- pullAt --------------------- */\n\nconst ldpullAt = (obj, path = '') => {\n  let pulled;\n  String.prototype.replace\n    .call(path, /\\['(.+?)'\\]/g, '.$1')\n    .split(/[,[\\].]+?/)\n    .filter(Boolean)\n    .reduce((res, key, i, arr) => {\n      // Base case res is undefined\n      if (res === undefined) {\n        return res;\n      }\n      // At the leaf delete the value\n      if (i === arr.length - 1 && Array.isArray(res)) {\n        // Pull out one value at index ( key )\n        pulled = res.splice(key, 1);\n        return res[key];\n      }\n      // Otherwise keep going\n      return res[key];\n    }, obj);\n  return pulled;\n};\n\n/* --------------------- values --------------------- */\n\nconst ldvalues = (obj = {}) => {\n  const props = Object.keys(obj);\n  return props.map(key => obj[key]);\n};\n\nconst pathToArrayElem = path => {\n  const pathArray = ldtoPath(path);\n  return Number.isInteger(+pathArray[pathArray.length - 1]);\n};\n\nclass ObjectMap {\n  static empty(object) {\n    return ldvalues(object).length === 0;\n  }\n\n  static get(object, path) {\n    const val = ldget(object, path);\n    //debug('GOT', path, val);\n    return val;\n  }\n\n  static has(object, path) {\n    return ldhas(object, path);\n  }\n\n  static set(object, path, value) {\n    if (value !== undefined) {\n      debug('SETTING', path, value);\n      ldset(object, path, value);\n    } else {\n      // Setting things to undefined in informed is special!\n      // so in this else statement we deal with that\n\n      // If the path is to an array leaf then we want to set to undefined\n      // Example:\n      // path = 'foo.bar[2]'\n      // foo.bar = [ 'baz', 'raz', 'taz' ]\n      // setting taz to undefined   ^^^\n      if (pathToArrayElem(path) && ObjectMap.get(object, path) !== undefined) {\n        debug('Special case SETTING', path, 'to undefined');\n        ldset(object, path, undefined);\n        let pathArray = ldtoPath(path);\n        pathArray = pathArray.slice(0, pathArray.length - 1);\n        cleanup(object, pathArray, false);\n      }\n      // Only delete the field if it needs to be deleted and its not a path to an array ( array leaf )\n      // Example:\n      // path = 'foo.bar'\n      // foo.bar = 'baz'\n      // removing foo.bar from the object completley\n      else if (\n        !pathToArrayElem(path) &&\n        ObjectMap.get(object, path) !== undefined\n      ) {\n        debug('Special case REMOVING', path, 'from object completley');\n        ObjectMap.delete(object, path);\n      }\n    }\n  }\n\n  static delete(object, path) {\n    debug('DELETE', path);\n\n    // Special case for arrays\n    if (pathToArrayElem(path)) {\n      debug('ARRAY', path);\n      //ldunset(object, path);\n      this.pullOut(object, path);\n    } else {\n      ldunset(object, path);\n    }\n\n    let pathArray = ldtoPath(path);\n    pathArray = pathArray.slice(0, pathArray.length - 1);\n    cleanup(object, pathArray);\n  }\n\n  // Very important ;)\n  static pullOut(object, path) {\n    // Get the path to the array\n    let pathArray = ldtoPath(path);\n    // debug('PathArray1', pathArray);\n    const index = pathArray[pathArray.length - 1];\n    pathArray = pathArray.slice(0, pathArray.length - 1);\n    debug('Pulling out:', pathArray, 'index', index);\n    // Get the array\n    const arr = ldget(object, pathArray);\n    debug('Array', arr);\n    // Pull out of array\n    if (Array.isArray(arr)) {\n      ldpullAt(arr, index);\n    }\n    cleanup(object, pathArray);\n  }\n}\n\nfunction cleanup(obj, path, pull = true) {\n  // Base case no path left\n  if (path.length === 0) {\n    return;\n  }\n\n  const object = ldget(obj, path);\n\n  // Clean up undefined from array\n  // if (Array.isArray(object) && pull) {\n  //   ldpull(object, undefined);\n  // }\n\n  // Delete object if its empty\n  if (\n    Array.isArray(object)\n      ? object.every(e => e == null)\n      : JSON.stringify(object) === '{}'\n  ) {\n    ldunset(obj, path);\n  }\n  // Recur\n  cleanup(obj, path.slice(0, path.length - 1));\n}\n\nexport default ObjectMap;\n","import React from 'react';\n\nconst FormRegisterContext = React.createContext({\n  register: () => {},\n  deregister: () => {},\n  setValue: () => {},\n  setTouched: () => {},\n  setError: () => {},\n  update: () => {},\n  getField: () => {},\n  expectRemoval: () => {},\n  getInitialValue: () => {}\n});\n\nconst FormStateContext = React.createContext({});\nconst FormApiContext = React.createContext({\n  getFullField: () => {},\n  getValues: () => {},\n  getOptions: () => ({}),\n  setInitialValue: () => {},\n  getInitialValue: () => {},\n  getDerrivedValue: () => {},\n  getSavedValue: () => {},\n  removeSavedState: () => {}\n});\nconst GroupContext = React.createContext();\nconst SelectContext = React.createContext();\n\nconst ArrayFieldStateContext = React.createContext();\nconst ArrayFieldApiContext = React.createContext();\nconst ArrayFieldItemApiContext = React.createContext();\nconst ArrayFieldItemStateContext = React.createContext();\nconst MultistepStateContext = React.createContext();\nconst MultistepApiContext = React.createContext();\nconst MultistepStepContext = React.createContext();\n\nexport {\n  FormRegisterContext,\n  FormStateContext,\n  FormApiContext,\n  GroupContext,\n  SelectContext,\n  ArrayFieldApiContext,\n  ArrayFieldStateContext,\n  ArrayFieldItemApiContext,\n  ArrayFieldItemStateContext,\n  MultistepStateContext,\n  MultistepApiContext,\n  MultistepStepContext\n};\n","import React, { useContext } from 'react';\nimport { FormApiContext } from '../Context';\n\nfunction useFormApi() {\n  const formApi = useContext(FormApiContext);\n  return formApi;\n}\n\nexport default useFormApi;\n","import React, { useState, useRef, useEffect } from 'react';\n\n// TODO figure out if this is bad?\n// https://github.com/facebook/react/issues/14543\nfunction useStateWithGetter(initial) {\n  const ref = useRef();\n  const mounted = useRef(true);\n  const [state, setState] = useState(initial);\n  ref.current = state;\n  const set = value => {\n    ref.current = value;\n    if (mounted.current) setState(value);\n  };\n  const get = () => {\n    return ref.current;\n  };\n  useEffect(() => {\n    return () => {\n      mounted.current = false;\n    };\n  }, []);\n  return [state, set, get];\n}\n\nexport default useStateWithGetter;\n","import ObjectMap from './ObjectMap';\n\nexport const getChildDisplayName = WrappedComponent => {\n  // fix for \"memo\" components\n  if (WrappedComponent.type && WrappedComponent.type.name) {\n    return WrappedComponent.type.name;\n  }\n\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n};\n\nexport const yupToFormErrors = yupError => {\n  const errors = {};\n  if (yupError.inner) {\n    if (yupError.inner.length === 0) {\n      // console.log(yupError.path);\n      ObjectMap.set(errors, yupError.path, yupError.message);\n      return;\n    }\n    for (let err of yupError.inner) {\n      if (!ObjectMap.get(errors, err.path)) {\n        // console.log(errors, err.path, err.message);\n        ObjectMap.set(errors, err.path, err.message);\n      }\n    }\n  }\n  return errors;\n};\n\nexport const validateYupSchema = (schema, values) => {\n  try {\n    schema.validateSync(values, { abortEarly: false });\n  } catch (e) {\n    const formErrors = yupToFormErrors(e);\n    return formErrors;\n  }\n};\n\nexport const yupToFormError = yupError => {\n  if (yupError.inner) {\n    if (yupError.inner.length === 0) {\n      return;\n    }\n    const err = yupError.inner[0];\n    return err.message;\n  }\n};\n\nexport const validateYupField = (schema, value) => {\n  try {\n    schema.validateSync(value, { abortEarly: false });\n  } catch (e) {\n    return yupToFormError(e);\n  }\n};\n\nexport const validateAjvSchema = (validate, data) => {\n  validate(data);\n  const errors = {};\n  if (validate.errors) {\n    validate.errors.forEach(({ message, dataPath, keyword, params }) => {\n      let path = dataPath;\n\n      // Special case for required\n      if (keyword === 'required') {\n        path = `${path}.${params.missingProperty}`;\n      }\n\n      // Get rid of leading dot\n      path = path.replace('.', '');\n      // console.log('PATH', path, message);\n      // TODO get message from informed if present\n      ObjectMap.set(errors, path, message);\n    });\n  }\n  return errors;\n};\n\n// https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nexport const uuidv4 = () => {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = (Math.random() * 16) | 0,\n      v = c == 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n};\n\nexport const debounce = (func, wait) => {\n  let timeout;\n\n  return function executedFunction(...args) {\n    const later = () => {\n      clearTimeout(timeout);\n      func(...args);\n    };\n\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n};\n\nexport const computeFieldFromProperty = (propertyName, property, prefix) => {\n  const {\n    'ui:control': uiControl,\n    'informed:props': informedProps,\n    'input:props': inputProps,\n    'ui:before': uiBefore,\n    'ui:after': uiAfter,\n    oneOf,\n    items,\n    enum: schemaEnum,\n    title: label,\n    minimum: min,\n    maximum: max,\n    minLength,\n    maxLength,\n    pattern,\n    type,\n    properties: subProperties\n  } = property;\n\n  // Set Id if not passed\n  let id = uuidv4();\n  if (inputProps && inputProps.id) {\n    id = inputProps.id;\n  }\n\n  const field = {\n    componentType: uiControl,\n    field: prefix ? `${prefix}.${propertyName}` : propertyName,\n    type,\n    uiBefore,\n    uiAfter,\n    properties: type === 'object' ? subProperties : undefined,\n    items: type === 'array' ? items : undefined,\n    props: {\n      label: label,\n      id,\n      min,\n      max,\n      minLength,\n      maxLength,\n      pattern,\n      ...informedProps,\n      ...inputProps\n    }\n  };\n\n  if (oneOf) {\n    const options = property.oneOf.map(option => {\n      const { 'input:props': inputProps = {} } = option;\n      return {\n        value: option.const,\n        label: option.title,\n        ...inputProps\n      };\n    });\n    field.props.options = options;\n  }\n\n  if (schemaEnum) {\n    const options = property.enum.map(val => {\n      return {\n        value: val,\n        label: val\n      };\n    });\n    field.props.options = options;\n  }\n\n  if (items && items.oneOf) {\n    const options = items.oneOf.map(option => {\n      const { 'input:props': inputProps = {} } = option;\n      return {\n        value: option.const,\n        label: option.title,\n        ...inputProps\n      };\n    });\n    field.props.options = options;\n  }\n\n  return field;\n};\n\nexport const computeFieldsFromSchema = (schema, onlyValidateSchema, prefix) => {\n  if (!schema || onlyValidateSchema) {\n    return [];\n  }\n\n  // Grab properties and items off of schema\n  const { properties = {}, allOf, propertyOrder = [] } = schema;\n\n  if (Object.keys(properties).length > 0) {\n    // Attempt to generate fields from properties\n    const fields = Object.keys(properties)\n      .sort((a, b) => {\n        const aIndex = propertyOrder.indexOf(a);\n        const bIndex = propertyOrder.indexOf(b);\n\n        return (\n          (aIndex > -1 ? aIndex : propertyOrder.length + 1) -\n          (bIndex > -1 ? bIndex : propertyOrder.length + 1)\n        );\n      })\n      .map(propertyName => {\n        const property = properties[propertyName];\n\n        const field = computeFieldFromProperty(propertyName, property, prefix);\n\n        return field;\n      });\n\n    // Check for all of ( we have conditionals )\n    if (allOf) {\n      fields.push({\n        componentType: 'conditionals',\n        // Each element of the \"allOf\" array is a conditional\n        allOf: allOf\n      });\n    }\n\n    return fields;\n  }\n\n  return [];\n};\n\n// Examples\n// field = \"name\" ---> properties.name\n// field = \"brother.name\" ---> properties.brother.properties.name\n// field = \"brother.siblings[1].friend.name\" ---> properties.brother.properties.siblings.items[1].properties.friend.properties.name\nexport const getSchemaPathFromJsonPath = jsonPath => {\n  // Convert\n  let schemaPath = jsonPath\n    .replace(/\\./g, '.properties.')\n    .replace(/\\[/g, '.itmes[');\n  // Add first properties\n  schemaPath = `properties.${schemaPath}`;\n  return schemaPath;\n};\n\n/* -------------------------- Formatter ----------------------------- */\n\nconst getFormatter = (formatter, value) => {\n  // If mask is a string turn it into an array;\n  if (typeof formatter === 'string') {\n    return formatter.split('').map(char => {\n      if (char === '#') {\n        return /\\d/;\n      }\n\n      if (char === '*') {\n        return /[\\w]/;\n      }\n\n      return char;\n    });\n  }\n\n  // If mask is a function use it to genreate current mask\n  if (typeof formatter === 'function') {\n    return formatter(value);\n  }\n\n  if (Array.isArray(formatter)) {\n    return formatter;\n  }\n\n  // Should never make it here throw\n  throw new Error('Formatter must be string, array, or function');\n};\n\nconst matchingIndex = (a, b) => {\n  let i = 0;\n  let mi = -1;\n  let matching = true;\n  // a = \"+1 \"\n  // b = \"+12\"\n  while (matching && i < a.length) {\n    if (a[i] == b[i]) {\n      mi = i;\n    } else {\n      matching = false;\n    }\n\n    i = i + 1;\n  }\n\n  return mi;\n};\n\nexport const informedFormat = (value, frmtr) => {\n  // console.log('Formatting', value);\n\n  // Null check\n  if (!value) {\n    return {\n      value,\n      offset: 0\n    };\n  }\n\n  // Generate formatter array\n  const formatter = getFormatter(frmtr, value);\n\n  // Start to fill in the array\n  // Example: phone formatter\n  // formatter =['+', '1', ' ', /\\d/, /\\d/, /\\d/, '-', /\\d/, /\\d/, /\\d/, '-', /\\d/, /\\d/, /\\d/, /\\d/]\n  // value examples:\n  // \"1231231234 ----> +1 123-123-1234\n  // \"+\" \t\t\t\t ----> +\n  // \"+1\" \t\t\t ----> +1\n  // \"+2\"\t\t\t\t ----> +1 2\n  // \"1\"\t\t\t\t ----> +1 1\n  // \"1234\"\t\t\t ----> +1 123-4\n  // \"123a\"      ----> +1 123\n\n  // Determine prefix length and suffix start\n  const prefixLength = formatter.findIndex(v => typeof v != 'string');\n  const suffixStart =\n    formatter.length -\n    [...formatter].reverse().findIndex(v => typeof v != 'string');\n\n  // Formatted value\n  let formatted = [];\n\n  // The characters from the current value\n  const chars = value.split('');\n\n  // To track the value index during itteration\n  let vIndex = 0;\n\n  let start = 0;\n\n  // If the value matches part of the prefix take it out\n  // Example prefix = \"+1 \" value = [\"+1 123-123-1234\", \"+12\", \"+2\"]\n  const matchIndex = matchingIndex(\n    formatter.slice(0, prefixLength),\n    chars.slice(0, prefixLength)\n  );\n  // console.log('Matching index', matchIndex);\n  if (matchIndex > -1) {\n    //vIndex = prefixLength;\n    vIndex = matchIndex + 1;\n    formatted = formatted.concat(formatter.slice(0, matchIndex + 1));\n    start = matchIndex + 1;\n  }\n  // Example prefix = \"+1 \" value=[\"1\", \"1234\"]\n  if (matchIndex < 0) {\n    // Start past the prefix\n    formatted = formatted.concat(formatter.slice(0, prefixLength));\n    start = prefixLength;\n  }\n\n  // console.log('start', start, formatted);\n  // console.log('PREFIX_LENGTHT', prefixLength);\n  // console.log('SUFIX_START', suffixStart);\n  // console.log('FORMATTER_LENGTH', formatter.length);\n\n  // To track if we have made it past the prefix\n  let pastPrefix = false;\n\n  // Fill in the stuff\n  for (let i = start; i < formatter.length; i++) {\n    // Get current formatter location matcher\n    const matcher = formatter[i];\n\n    // We get past the prefix if matcher is not a string\n    if (!pastPrefix && typeof matcher != 'string') {\n      pastPrefix = true;\n    }\n\n    // Chec to see if there is more value to look at\n    if (vIndex != chars.length) {\n      // Get the current value character\n      const curChar = chars[vIndex];\n\n      // If type is string normal compare otherwise regex compare\n      const match =\n        typeof matcher === 'string'\n          ? matcher === curChar\n          : matcher.test(curChar);\n\n      // If the current character of the value matches and matcher is a string\n      // \"1\" === \"1\"\n      if (match && typeof matcher === 'string') {\n        formatted.push(matcher);\n        //if( pastPrefix ){\n        vIndex = vIndex + 1;\n        //}\n      }\n      // If the current character does not match and matcher is a stirng\n      // \"1\" != \"+\"\n      else if (!match && typeof matcher === 'string') {\n        // Special check for 123a ---> dont want \"+1 123-\"\n        // Special check for 1234 ---> DO want \"+1 123-4\"\n        if (vIndex != chars.length) formatted.push(matcher);\n      }\n      // If the current character matches and the matcher is not a string\n      // /\\d/.test(\"2\")\n      else if (match && typeof matcher != 'string') {\n        formatted.push(curChar);\n        vIndex = vIndex + 1;\n      }\n      // If the current character does NOT match and the matecer is regex\n      // /\\d/.test(\"a\")\n      else if (!match && typeof matcher != 'string') {\n        // Throw out this value\n        vIndex = vIndex + 1;\n        i = i - 1;\n      }\n    } else {\n      // If mattcher is a string and we are at suffix keep going\n      if (typeof matcher === 'string' && i >= suffixStart) {\n        formatted.push(matcher);\n      } else {\n        // Otherwise we want to break out\n        break;\n      }\n    }\n  }\n\n  return {\n    value: formatted.join(''),\n    offset: value ? formatted.length - value.length : 0\n  };\n};\n","import { useEffect, useLayoutEffect } from 'react';\n\n// React currently throws a warning when using useLayoutEffect on the server.\n// To get around it, we can conditionally useEffect on the server (no-op) and\n// useLayoutEffect in the browser.\n// @see https://gist.github.com/gaearon/e7d97cdf38a2907924ea12e4ebdf3c85\nconst useIsomorphicLayoutEffect =\n  typeof window !== 'undefined' &&\n  typeof window.document !== 'undefined' &&\n  typeof window.document.createElement !== 'undefined'\n    ? useLayoutEffect\n    : useEffect;\n\nexport default useIsomorphicLayoutEffect;\n","import { useLayoutEffect } from 'react';\nimport useStateWithGetter from './useStateWithGetter';\n\nconst useCursorPosition = ({ value, inputRef, maintainCursor = true }) => {\n  const [cursor, setCursor, getCursor] = useStateWithGetter(0);\n\n  const [cursorOffset, setCursorOffset, getCursorOffset] = useStateWithGetter(\n    0\n  );\n\n  useLayoutEffect(\n    () => {\n      if (inputRef.current != null && getCursor()) {\n        // inputRef.current.selectionEnd = getCursor() + getCursorOffset();\n        const cursorLoc = getCursor() + getCursorOffset();\n        // Only offset if we need to\n        if (getCursorOffset() != 0 && maintainCursor) {\n          inputRef.current.setSelectionRange(cursorLoc + 1, cursorLoc + 1);\n        } else if (maintainCursor) {\n          inputRef.current.setSelectionRange(cursorLoc, cursorLoc);\n        }\n      }\n    },\n    [value]\n  );\n\n  return {\n    setCursorOffset,\n    setCursor,\n    cursor,\n    getCursor,\n    cursorOffset\n  };\n};\n\nexport default useCursorPosition;\n","import React, { useState, useEffect, useContext, useMemo, useRef } from 'react';\nimport { FormRegisterContext, MultistepStepContext } from '../Context';\nimport useFormApi from './useFormApi';\nimport useStateWithGetter from './useStateWithGetter';\nimport { validateYupField, uuidv4, informedFormat } from '../utils';\n\nimport Debug from '../debug';\nimport useLayoutEffect from './useIsomorphicLayoutEffect';\nimport ObjectMap from '../ObjectMap';\nimport useCursorPosition from './useCursorPosition';\nconst logger = Debug('informed:useField' + '\\t');\n\n// localStorage.debug = 'informed:.*' << HOW to enable debuging\n\nconst initializeValue = (value, mask, formatter, parser, initialize) => {\n  if (value != null) {\n    // Call users initialize if it was passed\n    if (initialize) {\n      return initialize(value);\n    }\n    // Call mask if it was passed\n    if (mask) {\n      return mask(value);\n    }\n    if (formatter && !parser) {\n      const res = informedFormat(value, formatter);\n      return res.value;\n    }\n    return value;\n  }\n  // Not needed but called out specifically\n  return undefined;\n};\n\nconst initializeMask = (value, format, parse, formatter) => {\n  // Call format and parse if they were passed\n  if (format && parse) {\n    return format(value);\n  }\n\n  // Call formatter\n  if (formatter) {\n    const res = informedFormat(value, formatter);\n    return res.value;\n  }\n\n  return value;\n};\n\nconst generateValidationFunction = (\n  validationFunc,\n  validationSchema,\n  { required }\n) => {\n  // We dont want a validation function if there was nothing passed\n  if (validationFunc || validationSchema) {\n    return (val, values) => {\n      if (validationSchema) {\n        return validateYupField(validationSchema, val);\n      }\n      if (validationFunc) {\n        return validationFunc(val, values);\n      }\n    };\n  }\n  if (required) {\n    return val => {\n      return validateRequired(val, required);\n    };\n  }\n};\n\nconst generateOnChange = ({ fieldType, setValue, onChange, multiple, ref }) => {\n  let setter = e => setValue(e);\n\n  if (\n    fieldType === 'text' ||\n    fieldType === 'textArea' ||\n    fieldType === 'number'\n  ) {\n    setter = e => setValue(e.target.value, e);\n  }\n\n  if (fieldType === 'select') {\n    setter = () => {\n      let selected = Array.from(ref.current)\n        .filter(option => option.selected)\n        .map(option => option.value);\n\n      setValue(multiple ? selected : selected[0] || '');\n    };\n  }\n\n  if (fieldType === 'checkbox') {\n    setter = e => {\n      setValue(e.target.checked);\n      if (onChange) {\n        onChange(e);\n      }\n    };\n  }\n\n  return e => {\n    setter(e);\n  };\n};\n\nconst generateOnBlur = ({ setTouched, onBlur }) => {\n  return e => {\n    setTouched(true);\n    if (onBlur) {\n      onBlur(e);\n    }\n  };\n};\n\nconst generateValue = ({ fieldType, maskedValue, multiple, value }) => {\n  switch (fieldType) {\n    case 'text':\n    case 'number':\n      return !maskedValue && maskedValue !== 0 ? '' : maskedValue;\n    case 'textArea':\n      return !maskedValue ? '' : maskedValue;\n    case 'select':\n      return value || (multiple ? [] : '');\n    case 'checkbox':\n      return !!value;\n    default:\n      return value;\n  }\n};\n\nconst generateFieldType = fieldType => {\n  switch (fieldType) {\n    case 'text':\n      return fieldType;\n    case 'number':\n      return fieldType;\n    case 'checkbox':\n      return fieldType;\n    default:\n      return;\n  }\n};\n\nconst validateRequired = (value, required) => {\n  if (required && (value == null || value === '')) {\n    return typeof required === 'string' ? required : 'This field is required';\n  }\n};\n\nfunction useField(fieldProps = {}, userRef) {\n  // Pull props off of field props\n  const {\n    field,\n    validate: validationFunc,\n    asyncValidate,\n    validationSchema,\n    mask,\n    maskWithCursorOffset,\n    format,\n    parse,\n    formatter,\n    parser,\n    initialValue,\n    validateOnChange,\n    validateOnBlur,\n    validateOnMount,\n    asyncValidateOnBlur,\n    maskOnBlur,\n    allowEmptyString,\n    onValueChange,\n    notify,\n    keepState,\n    maintainCursor,\n    debug,\n    shadow,\n    step,\n    fieldType,\n    multiple,\n    onChange,\n    onBlur,\n    formController,\n    relevant: userRelevant,\n    required,\n    keepStateIfRelevant,\n    initialize,\n    ...userProps\n  } = fieldProps;\n\n  // Create ref to a field id\n  const [fieldId] = useState(uuidv4());\n\n  // Grab the form register context\n  let updater = useContext(FormRegisterContext);\n\n  // Grab multistepContext\n  const multistepContext = useContext(MultistepStepContext);\n  const inMultistep = multistepContext || keepStateIfRelevant;\n\n  // Grab the form api\n  let formApi = useFormApi();\n\n  // Create ref to fieldApi\n  const fieldApiRef = useRef();\n\n  // Create initial render ref\n  const initialRenerRef = useRef(true);\n\n  // Create ref to fieldObject\n  const fieldObjectRef = useRef();\n\n  // If the form Controller was passed in then use that instead\n  if (formController) {\n    updater = formController.updater;\n    formApi = formController.getFormApi();\n  }\n\n  // Generate validation function\n  const validate = generateValidationFunction(\n    validationFunc,\n    validationSchema,\n    { required }\n  );\n\n  // Grab possible initial value from form\n  const [formInitialValue] = useState(() => updater.getInitialValue(field));\n\n  // We might have keep state so check for it!\n  const savedState = formApi.getSavedValue(field);\n\n  // Create Initial Values\n  let initVal;\n  let initTouched;\n\n  // We do these checks because initial value could be false or zero!!\n  if ((keepState || inMultistep) && savedState) {\n    logger(`Setting field ${name}'s kept state`, savedState);\n    initVal = savedState.value;\n    initTouched = savedState.touched;\n    // Remove the saved state\n    formApi.removeSavedState(name);\n  } else if (initialValue != undefined) {\n    initVal = initialValue;\n  } else {\n    initVal = formInitialValue;\n  }\n\n  // Initialize state\n  const [value, setVal, getTheVal] = useStateWithGetter(\n    initializeValue(initVal, mask, formatter, parser, initialize)\n  );\n\n  const [error, setErr, getErr] = useStateWithGetter(\n    validateOnMount ? validate(value) : undefined\n  );\n  const [touched, setTouch, getTouch] = useStateWithGetter(initTouched);\n\n  const [maskedValue, setMaskedValue] = useState(() =>\n    initializeMask(value, format, parse, formatter, parser)\n  );\n\n  // Create then update refs to props\n  const initialValueRef = useRef(initialValue);\n  const fieldRef = useRef(field);\n  const prevFieldRef = useRef();\n  initialValueRef.current = initialValue;\n  fieldRef.current = field;\n\n  // Create ref to input\n  const internalRef = useRef(null);\n\n  const ref = React.useMemo(() => userRef || internalRef, []);\n\n  // Setup cursor position tracking\n  const { getCursor, setCursor, setCursorOffset } = useCursorPosition({\n    value: value,\n    inputRef: ref,\n    maintainCursor: !!maintainCursor\n  });\n\n  // Default relevant function\n  const relevantFunc = () => true;\n\n  const relevant = params => {\n    const rel = userRelevant || relevantFunc;\n    const ff = formApi.getFullField(fieldRef.current) || fieldRef.current;\n    const args = {\n      path: ff,\n      parentPath: ff.replace(/(.*)[.[].*/, '$1'),\n      get: (values, path) => ObjectMap.get(values, path)\n    };\n    if (multistepContext && multistepContext.relevant) {\n      return rel(params, args) && multistepContext.relevant(params, args);\n    }\n    return rel(params, args);\n  };\n\n  const [isRelevant, setIsRelevant, getIsRelevant] = useStateWithGetter(\n    relevant(formApi.getValues())\n  );\n\n  const multistepRelevant = params => {\n    if (multistepContext && multistepContext.relevant) {\n      return multistepContext.relevant(params);\n    }\n    return true;\n  };\n\n  const checkRelevant = () => {\n    const newRel = relevant(formApi.getValues());\n    const curRel = getIsRelevant();\n\n    if (newRel != curRel) {\n      setIsRelevant(newRel);\n    }\n    return newRel;\n  };\n\n  useEffect(\n    () => {\n      // Reset if we dont have keep state and relevance changed.\n      if (!isRelevant && !keepState) {\n        fieldApiRef.current.reset();\n      }\n    },\n    [isRelevant]\n  );\n\n  // Special getter to support shadow fields\n  const getVal = () => {\n    return shadow ? formApi.getDerrivedValue(field) : getTheVal();\n  };\n\n  /* ---------------------- Setters ---------------------- */\n\n  // ---- Define set error ----\n\n  const setError = (val, { preventUpdate } = {}) => {\n    // For multistep forms always set error to undefined when not at that step\n    if (step && formApi.getStep() < step) {\n      logger(\n        `Setting ${field}'s error to undefined as we are not at that step`\n      );\n      setErr(undefined);\n      updater.setError(fieldId, undefined, !preventUpdate);\n    } else {\n      logger(`Setting ${field}'s error to ${val}`);\n      setErr(val);\n      updater.setError(fieldId, val, !preventUpdate);\n    }\n  };\n\n  // ---- Define set value ----\n  const setValue = (v, e, options = {}) => {\n    let val = v;\n\n    logger(`Setting ${field} to ${val}`);\n\n    // Set value may have been called externally\n    // NOT from an inputs change event ( onChange )\n    // Therefore, as a precausion, we call the initialize function to format it just in case\n    if (initialize) {\n      val = initialize(val);\n    }\n\n    // Get the most up to date options\n    const formOptions = formApi.getOptions();\n\n    // Initialize maked value\n    let maskedVal = val;\n\n    if (\n      val === '' &&\n      !allowEmptyString &&\n      !options.allowEmptyString &&\n      !formOptions.allowEmptyStrings\n    ) {\n      val = undefined;\n    }\n\n    // Turn string into number for number fields\n    if (\n      (fieldProps.type === 'number' || fieldType === 'number') &&\n      val !== undefined\n    ) {\n      val = +val;\n    }\n\n    // Remember Cursor position!\n    if (e && e.target && e.target.selectionStart) {\n      setCursor(e.target.selectionStart);\n    }\n\n    // Call mask if it was passed\n    if (mask && !maskOnBlur) {\n      maskedVal = mask(val, getCursor());\n      val = mask(val, getCursor());\n    }\n\n    // Call maskWithCursorOffset if it was passed\n    if (maskWithCursorOffset && !maskOnBlur) {\n      const res = maskWithCursorOffset(val, getCursor());\n      maskedVal = res.value;\n      val = res.value;\n      setCursorOffset(res.offset);\n    }\n\n    // Call format and parse if they were passed\n    if (format && parse) {\n      // Masked value only differs from value when format and parse are used\n      val = parse(val);\n      maskedVal = format(val);\n    }\n\n    // Call formatter and parser if passed\n    if (formatter) {\n      const res = informedFormat(val, formatter);\n      setCursorOffset(res.offset);\n      maskedVal = res.value;\n      val = maskedVal;\n    }\n\n    // // Only parse if parser was passed\n    if (parser) {\n      val = val != null ? parser(val) : val;\n    }\n\n    // We only need to call validate if the user gave us one\n    // and they want us to validate on change && its not the initial validation\n    if (validate && validateOnChange && !options.initial) {\n      logger(`Validating after change ${field} ${val}`);\n      setError(validate(val, formApi.getValues()));\n    }\n\n    // Now we update the value\n    setVal(val);\n    setMaskedValue(maskedVal);\n\n    // If the user passed in onValueChange then call it!\n    if (onValueChange) {\n      onValueChange(val);\n    }\n\n    // Call the updater\n    updater.setValue(fieldId, val, !options.preventUpdate);\n  };\n\n  // ---- Define set touched ----\n  const setTouched = (val, reset, { preventUpdate } = {}) => {\n    logger(`Field ${field} has been touched`);\n\n    // We only need to call validate if the user gave us one\n    // and they want us to validate on blur\n    if (validate && validateOnBlur && !reset && val) {\n      logger(`Validating after blur ${field} ${getVal()}`);\n      setError(validate(getVal(), formApi.getValues()));\n    }\n\n    // Same for async\n    if (asyncValidate && asyncValidateOnBlur && !reset && val) {\n      logger(`Validating async after blur ${field} ${getVal()}`);\n      asyncValidate(getVal(), formApi.getValues());\n    }\n\n    // Call mask if it was passed\n    if (mask && maskOnBlur) {\n      // Generate the masked value from the current value\n      const maskedVal = mask(getVal());\n\n      // Now we update the value\n      setVal(maskedVal);\n      setMaskedValue(maskedVal);\n\n      // If the user passed in onValueChange then call it!\n      if (onValueChange) {\n        onValueChange(maskedVal);\n      }\n\n      // Call the updater\n      updater.setValue(fieldId, maskedVal, !preventUpdate);\n    }\n\n    // Call maskWithCursorOffset if it was passed\n    if (maskWithCursorOffset && maskOnBlur) {\n      // Generate the mask and offset\n      const res = maskWithCursorOffset(getVal());\n\n      // Set the offset\n      setCursorOffset(res.offset);\n\n      // Now we update the value\n      setVal(res.value);\n      setMaskedValue(res.value);\n\n      // If the user passed in onValueChange then call it!\n      if (onValueChange) {\n        onValueChange(res.value);\n      }\n\n      // Call the updater\n      updater.setValue(fieldId, res.value, !preventUpdate);\n    }\n\n    // Finally we set touched and call the updater\n    setTouch(val);\n    updater.setTouched(fieldId, val, !preventUpdate);\n  };\n\n  // ---- Define reset ----\n  const reset = ({ preventUpdate } = {}) => {\n    const initVal = initializeValue(\n      initialValueRef.current || updater.getInitialValue(fieldRef.current),\n      mask,\n      formatter,\n      parser,\n      initialize\n    );\n    // TODO support numbers\n    setValue(initVal, null, { initial: true, preventUpdate });\n    // Setting somthing to undefined will remove it\n    setError(validateOnMount ? validate(initVal) : undefined, {\n      preventUpdate\n    });\n    setTouched(undefined, true, { preventUpdate });\n  };\n\n  // ---- Define validate ----\n\n  // Note: it takes values as an optimization for when\n  // the form controller calls it ( dont need to generate all values )\n  // over and over :)\n  const fieldValidate = values => {\n    if (validate) {\n      logger(`Field validating ${field} ${getVal()}`);\n      setError(validate(getVal(), values || formApi.getValues()));\n    }\n  };\n\n  const fieldAsyncValidate = values => {\n    if (asyncValidate) {\n      logger(`Field async validating ${field} ${getVal()}`);\n      asyncValidate(getVal(), values || formApi.getValues());\n    }\n  };\n\n  /* ----------------- Field Api && State ----------------- */\n\n  // Build the field api\n  const fieldApi = {\n    setValue,\n    setTouched,\n    setError,\n    reset,\n    validate: fieldValidate,\n    asyncValidate: fieldAsyncValidate,\n    getValue: getVal,\n    getTouched: getTouch,\n    getError: getErr,\n    getIsRelevant: getIsRelevant,\n    getFieldState: () => ({\n      value: getVal(),\n      touched: getTouch()\n    }),\n    relevant,\n    multistepRelevant,\n    checkRelevant\n  };\n  fieldApiRef.current = fieldApi;\n\n  // Build the field state\n  let fieldState = {\n    value,\n    error,\n    touched,\n    maskedValue,\n    isRelevant\n  };\n\n  // Create shadow state if this is a shadow field\n  if (shadow) {\n    fieldState = {\n      error,\n      touched\n    };\n  }\n\n  logger('Render', formApi.getFullField(field), fieldState);\n\n  // We want to register and deregister this field\n  useLayoutEffect(() => {\n    const fullField = formApi.getFullField(fieldRef.current);\n    logger('Register', fieldId, fieldRef.current);\n    fieldObjectRef.current = {\n      field: fullField,\n      fieldId,\n      fieldApi,\n      fieldState,\n      notify,\n      keepState,\n      inMultistep,\n      shadow\n    };\n    updater.register(fieldId, fieldObjectRef.current);\n    return () => {\n      const fullField = formApi.getFullField(fieldRef.current);\n      logger('Deregister', fieldId, fullField);\n      updater.deregister(fieldId);\n    };\n  }, []);\n\n  // We want to let the controller know of changes on this field when specific props change\n  useEffect(\n    () => {\n      const fullField = formApi.getFullField(field);\n      if (initialRenerRef.current) {\n        initialRenerRef.current = false;\n      } else {\n        logger('Update', field, inMultistep);\n        fieldObjectRef.current.field = fullField;\n        updater.update(fieldId, fieldObjectRef.current, prevFieldRef.current);\n      }\n      return () => {\n        prevFieldRef.current = fullField;\n      };\n    },\n    [field]\n  );\n\n  // Maintain cursor position\n  // useLayoutEffect(\n  //   () => {\n  //     if (maintainCursor && ref.current != null && getCursor())\n  //       ref.current.selectionEnd = getCursor() + getCursorOffset();\n  //   },\n  //   [value]\n  // );\n\n  // for debugging\n  useLayoutEffect(() => {\n    if (debug && ref) {\n      ref.current.style.border = '5px solid orange';\n      setTimeout(() => {\n        ref.current.style.borderWidth = '2px';\n        ref.current.style.borderStyle = 'inset';\n        ref.current.style.borderColor = 'initial';\n        ref.current.style.borderImage = 'initial';\n      }, 500);\n    }\n  });\n\n  // This is an awesome optimization!!\n  const shouldUpdate = [\n    ...Object.values(fieldState),\n    ...Object.values(fieldProps),\n    ...Object.values(userProps)\n  ];\n\n  const render = children =>\n    useMemo(() => (isRelevant ? children : null), [...shouldUpdate]);\n\n  // Build some setub fields so users can easily intagrate without any hookup code\n\n  const name = field;\n  const changeHandler = generateOnChange({\n    fieldType,\n    setValue,\n    onChange,\n    multiple,\n    ref\n  });\n  const blurHandler = generateOnBlur({ setTouched, onBlur });\n  const hookedValue = generateValue({\n    fieldType,\n    maskedValue,\n    multiple,\n    value\n  });\n\n  const type = generateFieldType(fieldType);\n\n  return {\n    fieldState,\n    fieldApi,\n    render,\n    ref,\n    userProps: {\n      ...userProps,\n      multiple, // WE NEED TO PUT THESE BACK!!\n      onChange, // WE NEED TO PUT THESE BACK!!\n      onBlur, // WE NEED TO PUT THESE BACK!!\n      // required // WE NEED TO PUT THESE BACK!!\n      id: userProps.id || fieldId // If user did not pass id we pass fields id\n    },\n    informed: {\n      name,\n      multiple,\n      onChange: changeHandler,\n      onBlur: blurHandler,\n      value: hookedValue,\n      ref,\n      type,\n      id: userProps.id || fieldId, // If user did not pass id we pass fields id\n      ...userProps\n    }\n  };\n}\n\nexport default useField;\n","import React from 'react';\nimport useField from '../hooks/useField';\nimport { getChildDisplayName } from '../utils';\n\nconst asField = Component => {\n  const forwardRef = React.forwardRef((props, userRef) => {\n    const { fieldState, fieldApi, render, ref, userProps } = useField(\n      props,\n      userRef\n    );\n\n    return render(\n      <Component\n        fieldApi={fieldApi}\n        fieldState={fieldState}\n        field={props.field}\n        forwardedRef={ref}\n        debug={props.debug}\n        type={props.type}\n        {...userProps}\n      />\n    );\n  });\n\n  forwardRef.displayName = `asField(${getChildDisplayName(Component)})`;\n\n  return forwardRef;\n};\n\nexport default asField;\n","import React from 'react';\nimport asField from '../../HOC/asField';\nimport Debug from '../../debug';\nimport useLayoutEffect from '../../hooks/useIsomorphicLayoutEffect';\nconst logger = Debug('informed:Text' + '\\t');\n\nconst Text = ({ fieldApi, fieldState, ...props }) => {\n  const { maskedValue } = fieldState;\n  const { setValue, setTouched } = fieldApi;\n  const {\n    onChange,\n    onBlur,\n    field,\n    initialValue,\n    forwardedRef,\n    debug,\n    label,\n    title,\n    id,\n    ...rest\n  } = props;\n\n  logger('Render', field);\n\n  // for debugging\n  useLayoutEffect(() => {\n    if (debug && forwardedRef) {\n      forwardedRef.current.style.background = 'red';\n      setTimeout(() => {\n        forwardedRef.current.style.background = 'white';\n      }, 500);\n    }\n  });\n\n  return (\n    <>\n      {label ? <label htmlFor={id}> {label} </label> : null}\n      <input\n        {...rest}\n        id={id}\n        name={field}\n        ref={forwardedRef}\n        value={!maskedValue && maskedValue !== 0 ? '' : maskedValue}\n        onChange={e => {\n          setValue(e.target.value, e);\n          if (onChange) {\n            onChange(e);\n          }\n        }}\n        onBlur={e => {\n          setTouched(true);\n          if (onBlur) {\n            onBlur(e);\n          }\n        }}\n      />\n    </>\n  );\n};\n\nexport { Text as BasicText };\n\nexport default asField(Text);\n","import React from 'react';\nimport asField from '../../HOC/asField';\nimport useLayoutEffect from '../../hooks/useIsomorphicLayoutEffect';\n\nconst TextArea = ({ fieldApi, fieldState, ...props }) => {\n  const { maskedValue } = fieldState;\n  const { setValue, setTouched } = fieldApi;\n  const {\n    onChange,\n    onBlur,\n    field,\n    initialValue,\n    forwardedRef,\n    debug,\n    label,\n    id,\n    ...rest\n  } = props;\n\n  // for debugging\n  useLayoutEffect(() => {\n    if (debug && forwardedRef) {\n      forwardedRef.current.style.background = 'red';\n      setTimeout(() => {\n        forwardedRef.current.style.background = 'white';\n      }, 500);\n    }\n  });\n\n  return (\n    <>\n      {label ? <label htmlFor={id}> {label} </label> : null}\n      <textarea\n        {...rest}\n        id={id}\n        name={field}\n        ref={forwardedRef}\n        value={!maskedValue ? '' : maskedValue}\n        onChange={e => {\n          setValue(e.target.value, e);\n          if (onChange) {\n            onChange(e);\n          }\n        }}\n        onBlur={e => {\n          setTouched(true);\n          if (onBlur) {\n            onBlur(e);\n          }\n        }}\n      />\n    </>\n  );\n};\n\nexport { TextArea as BasicTextArea };\n\nexport default asField(TextArea);\n","import React, { useRef } from 'react';\nimport asField from '../../HOC/asField';\nimport Debug from '../../debug';\nimport useLayoutEffect from '../../hooks/useIsomorphicLayoutEffect';\n\nconst logger = Debug('informed:Select' + '\\t');\n\nconst Select = ({ fieldApi, fieldState, ...props }) => {\n  const { value } = fieldState;\n  const { setTouched } = fieldApi;\n  const {\n    onChange,\n    onBlur,\n    field,\n    initialValue,\n    options,\n    children,\n    forwardedRef,\n    debug,\n    multiple,\n    label,\n    id,\n    ...rest\n  } = props;\n\n  const selectRef = useRef();\n\n  const handleChange = e => {\n    let selected = Array.from((forwardedRef || selectRef).current)\n      .filter(option => option.selected)\n      .map(option => option.value);\n\n    fieldApi.setValue(multiple ? selected : selected[0] || '');\n\n    if (onChange && e) {\n      onChange(e);\n    }\n  };\n\n  // for debugging\n  useLayoutEffect(() => {\n    if (debug && forwardedRef) {\n      forwardedRef.current.style.background = 'red';\n      setTimeout(() => {\n        forwardedRef.current.style.background = 'white';\n      }, 500);\n    }\n  });\n\n  logger('Render', field, value);\n\n  return (\n    <>\n      {label ? <label htmlFor={id}> {label} </label> : null}\n      <select\n        {...rest}\n        id={id}\n        multiple={multiple}\n        name={field}\n        ref={forwardedRef || selectRef}\n        value={value || (multiple ? [] : '')}\n        onChange={handleChange}\n        onBlur={e => {\n          setTouched(true);\n          if (onBlur) {\n            onBlur(e);\n          }\n        }}>\n        {options\n          ? options.map(option => (\n              <option\n                key={option.value}\n                value={option.value}\n                disabled={option.disabled}>\n                {option.label}\n              </option>\n            ))\n          : children}\n      </select>\n    </>\n  );\n};\n\nexport { Select as BasicSelect };\n\nexport default asField(Select);\n","import React from 'react';\nimport asField from '../../HOC/asField';\n\nconst Checkbox = ({ fieldApi, fieldState, ...props }) => {\n  const { value } = fieldState;\n  const { setValue, setTouched } = fieldApi;\n  const {\n    onChange,\n    onBlur,\n    field,\n    initialValue,\n    debug,\n    forwardedRef,\n    id,\n    label,\n    ...rest\n  } = props;\n  return (\n    <>\n      {label ? <label htmlFor={id}> {label} </label> : null}\n\n      <input\n        {...rest}\n        id={id}\n        name={field}\n        ref={forwardedRef}\n        checked={!!value}\n        onChange={e => {\n          setValue(e.target.checked);\n          if (onChange) {\n            onChange(e);\n          }\n        }}\n        onBlur={e => {\n          setTouched(true);\n          if (onBlur) {\n            onBlur(e);\n          }\n        }}\n        type=\"checkbox\"\n      />\n    </>\n  );\n};\n\nexport { Checkbox as BasicCheckbox };\n\nexport default asField(Checkbox);\n","import React from 'react';\nimport { GroupContext } from '../Context';\n\nconst withRadioGroup = Component =>\n  React.forwardRef((props, ref) => (\n    <GroupContext.Consumer>\n      {({ radioGroupApi, radioGroupState }) => (\n        <Component\n          radioGroupApi={radioGroupApi}\n          radioGroupState={radioGroupState}\n          ref={ref}\n          {...props}\n        />\n      )}\n    </GroupContext.Consumer>\n  ));\n\nexport default withRadioGroup;\n","import React from 'react';\nimport withRadioGroup from '../../HOC/withRadioGroup';\n\nconst Radio = ({ radioGroupApi, radioGroupState, ...props }) => {\n  const { value: groupValue } = radioGroupState;\n  const {\n    setValue,\n    setTouched,\n    onChange: groupOnChange,\n    onBlur: groupOnBlur\n  } = radioGroupApi;\n  const {\n    value,\n    onChange,\n    onBlur,\n    field,\n    initialValue,\n    forwardedRef,\n    ...rest\n  } = props;\n  return (\n    <input\n      {...rest}\n      name={field}\n      ref={forwardedRef}\n      value={value}\n      checked={groupValue === value}\n      onChange={e => {\n        if (!e.target.checked) {\n          return;\n        }\n        setValue(value);\n        if (onChange) {\n          onChange(e);\n        }\n        if (groupOnChange) {\n          groupOnChange(e);\n        }\n      }}\n      onBlur={e => {\n        setTouched(true);\n        if (onBlur) {\n          onBlur(e);\n        }\n        if (groupOnBlur) {\n          groupOnBlur(e);\n        }\n      }}\n      type=\"radio\"\n    />\n  );\n};\n\nexport { Radio as BasicRadio };\n\nexport default withRadioGroup(Radio);\n","import React, { Component } from 'react';\nimport { GroupContext } from '../../Context';\nimport Radio from './Radio';\n\nimport asField from '../../HOC/asField';\n\nclass RadioGroup extends Component {\n  get groupContext() {\n    return {\n      radioGroupApi: {\n        ...this.props.fieldApi,\n        onChange: this.props.onChange,\n        onBlur: this.props.onBlur\n      },\n      radioGroupState: this.props.fieldState\n    };\n  }\n\n  render() {\n    const { options, children } = this.props;\n\n    return (\n      <GroupContext.Provider value={this.groupContext}>\n        {options\n          ? options.map(option => (\n              <label key={option.value}>\n                {option.label} <Radio value={option.value} />\n              </label>\n            ))\n          : children}\n      </GroupContext.Provider>\n    );\n  }\n}\n\nexport { RadioGroup as BasicRadioGroup };\n\nexport default asField(RadioGroup);\n","import React, { useContext } from 'react';\nimport { ArrayFieldApiContext } from '../Context';\n\nfunction useArrayFieldApi() {\n  return useContext(ArrayFieldApiContext);\n}\n\nexport default useArrayFieldApi;\n","import React from 'react';\nimport useArrayFieldApi from '../../hooks/useArrayFieldApi';\n\nconst AddButton = () => {\n  const { add } = useArrayFieldApi();\n\n  return (\n    <button\n      onClick={() => {\n        add();\n      }}\n      type=\"button\">\n      Add\n    </button>\n  );\n};\n\nexport default AddButton;\n","import React, { useContext } from 'react';\nimport { ArrayFieldItemApiContext } from '../Context';\n\nfunction useArrayFieldItemApi() {\n  return useContext(ArrayFieldItemApiContext);\n}\n\nexport default useArrayFieldItemApi;\n","import React from 'react';\nimport useArrayFieldItemApi from '../../hooks/useArrayFieldItemApi';\n\nconst AddButton = () => {\n  const { remove } = useArrayFieldItemApi();\n\n  return (\n    <button\n      onClick={() => {\n        remove();\n      }}\n      type=\"button\">\n      Remove\n    </button>\n  );\n};\n\nexport default AddButton;\n","import React, { useState, useMemo, useContext } from 'react';\nimport useFormApi from './useFormApi';\nimport useField from './useField';\nimport useStateWithGetter from './useStateWithGetter';\nimport Debug from '../debug';\nimport useLayoutEffect from './useIsomorphicLayoutEffect';\nimport {\n  FormRegisterContext,\n  ArrayFieldApiContext,\n  ArrayFieldStateContext\n} from '../Context';\n\nimport { uuidv4 } from '../utils';\nimport ObjectMap from '../ObjectMap';\n\nconst logger = Debug('informed:useArrayField' + '\\t');\n\nconst useArrayField = ({\n  field,\n  initialValue,\n  validate,\n  arrayFieldApiRef,\n  ...props\n}) => {\n  // Reference to the form Api\n  const formApi = useFormApi();\n\n  // Keep track of fields that belong to this array field\n  const [fieldsById] = useState(new Map());\n\n  // Grab the form register context\n  const updater = useContext(FormRegisterContext);\n\n  // May be scoped so get full field name!!\n  const fullField = formApi.getFullField(field);\n\n  const initialVals = updater.getInitialValue(field) || initialValue || [];\n\n  // TODO throw error if initial value and its not array\n\n  // If keep state was passed into the child inputs we need to maintain the length of\n  // keys, in order to do so we grab the value from informeds api\n\n  const keptValues =\n    formApi.getSavedValue(fullField) && formApi.getSavedValue(fullField).value;\n\n  const [\n    initialValues,\n    setInitialValues,\n    getInitialValues\n  ] = useStateWithGetter(keptValues || initialVals);\n\n  const initialKeys = initialValues ? initialValues.map(() => uuidv4()) : [];\n\n  const [keys, setKeys, getKeys] = useStateWithGetter(initialKeys);\n\n  const validateWithLength = useMemo(() => (value, values) => {\n    const length = getKeys() == null ? 0 : getKeys().length;\n    return validate ? validate(value, length, values) : undefined;\n  });\n\n  // Register shadow field\n  const { fieldApi } = useField({\n    field,\n    validate: validate ? validateWithLength : undefined,\n    shadow: true,\n    ...props\n  });\n\n  // Register for events\n  useLayoutEffect(\n    () => {\n      // Define event handler\n      const onChangeHandler = fieldName => {\n        // Dont do anythign if we updated\n        if (fieldName === fullField) {\n          return;\n        }\n\n        logger(`${fullField} changed`);\n\n        // determine if one of our array children triggered this change\n        if (RegExp(`${fullField}\\\\[[0-9]+\\\\]`).test(fieldName)) {\n          // If it was we need to call validate\n          fieldApi.validate();\n        }\n      };\n\n      // Register for events\n      formApi.emitter.on('value', onChangeHandler);\n\n      // Unregister events\n      return () => {\n        formApi.emitter.removeListener('value', onChangeHandler);\n      };\n    },\n    [field]\n  );\n\n  const remove = i => {\n    // Notify form to expect removal on this field\n    logger(\n      'EXPECTING REMOVAL OF',\n      `${field}[${i}] and ${field}[${keys.length - 1}]`\n    );\n    updater.expectRemoval(`${field}[${i}]`);\n    updater.expectRemoval(`${field}[${keys.length - 1}]`);\n\n    // Remove the key\n    const newKeys = keys.slice(0, i).concat(keys.slice(i + 1, keys.length));\n    setKeys(newKeys);\n    // Remove the initial value ( user wanted to get rid of that input )\n    const initVals = getInitialValues();\n    const newInitialValues = initVals\n      .slice(0, i)\n      .concat(initVals.slice(i + 1, initVals.length));\n    setInitialValues(newInitialValues);\n    //formApi.setInitialValue(field, newInitialValues);\n  };\n\n  const swap = (a, b) => {\n    logger('Swapping', `${field}[${a}] and ${field}[${b}]`);\n\n    // Swap the keys\n    const newKeys = [...keys];\n\n    if (keys[a] && keys[b]) {\n      newKeys[a] = keys[b];\n      newKeys[b] = keys[a];\n    } else {\n      // eslint-disable-next-line no-console\n      console.warn(\n        `Attempted to swap ${a} with ${b} but one of them does not exist :(`\n      );\n    }\n\n    setKeys(newKeys);\n  };\n\n  const add = () => {\n    keys.push(uuidv4());\n    setKeys([...keys]);\n  };\n\n  const addWithInitialValue = initialValue => {\n    keys.push(uuidv4());\n    setKeys([...keys]);\n    const newInitialValues = [...getInitialValues()];\n    newInitialValues[keys.length - 1] = initialValue;\n    setInitialValues(newInitialValues);\n  };\n\n  const reset = () => {\n    // When resetting we reset to the users initial value not the one tracked by this hook\n    const initVals = updater.getInitialValue(field) || initialValue || [];\n    // Set our initial values back to what the user set at beginning\n    setInitialValues(initVals);\n    // Build a new set of keys because everything is new !!!\n    const resetKeys = initVals ? initVals.map(() => uuidv4()) : [];\n    // Finally set that shit !\n    setKeys(resetKeys);\n  };\n\n  const fields = keys.map((key, i) => {\n    const arrayFieldItemApi = {\n      remove: () => remove(i)\n    };\n\n    const arrayFieldItemState = {\n      initialValue: initialValues && initialValues[i],\n      key,\n      field: `${field}[${i}]`,\n      index: i\n    };\n\n    return {\n      arrayFieldItemApi,\n      arrayFieldItemState,\n      // Makes it easier for users\n      ...arrayFieldItemApi,\n      ...arrayFieldItemState\n    };\n  });\n\n  const arrayFieldApi = {\n    add,\n    swap,\n    addWithInitialValue,\n    reset\n  };\n\n  if (arrayFieldApiRef) {\n    arrayFieldApiRef.current = arrayFieldApi;\n  }\n\n  const arrayFieldState = {\n    fields,\n    field\n  };\n\n  // Wrap the updater to update array fields references\n  const wrappedUpdator = {\n    ...updater,\n    register: (id, fld, ...args) => {\n      fieldsById.set(id, fld);\n      updater.register(id, fld, ...args);\n    },\n    deregister: (id, ...args) => {\n      fieldsById.delete(id);\n      updater.deregister(id, ...args);\n    },\n    getInitialValue: fieldName => {\n      // If we are getting initial value and its for this field return that\n      if (RegExp(`${fullField}\\\\[[0-9]+\\\\]`).test(fieldName)) {\n        const path = fieldName.replace(field, '');\n        const v = ObjectMap.get(getInitialValues(), path);\n        logger(`Resetting ${path} to ${v}`);\n        return v;\n      }\n      return updater.getInitialValue(fieldName);\n    }\n  };\n\n  const render = children => (\n    <FormRegisterContext.Provider value={wrappedUpdator}>\n      <ArrayFieldApiContext.Provider value={arrayFieldApi}>\n        <ArrayFieldStateContext.Provider value={arrayFieldState}>\n          {children}\n        </ArrayFieldStateContext.Provider>\n      </ArrayFieldApiContext.Provider>\n    </FormRegisterContext.Provider>\n  );\n\n  return {\n    render,\n    add,\n    swap,\n    addWithInitialValue,\n    fields,\n    arrayFieldState,\n    arrayFieldApi,\n    field\n  };\n};\n\nexport default useArrayField;\n","import React, { useMemo } from 'react';\nimport useFormApi from './useFormApi';\n\nconst buildScopedFormApi = (scope, formApi) => {\n  return {\n    ...formApi,\n    getValue: field => formApi.getValue(`${scope}.${field}`),\n    getTouched: field => formApi.getTouched(`${scope}.${field}`),\n    getError: field => formApi.getError(`${scope}.${field}`),\n    setValue: (field, value) => formApi.setValue(`${scope}.${field}`, value),\n    setTouched: (field, value) => formApi.setTouched(`${scope}.${field}`, value),\n    setError: (field, value) => formApi.setError(`${scope}.${field}`, value),\n    getInitialValue: field => formApi.getInitialValue(`${scope}.${field}`),\n    getFullField: field => `${formApi.getFullField(scope)}.${field}`\n  };\n};\n\nfunction useScopedApi( scope ) {\n\n  const formApi = useFormApi();\n\n  // VERY important to memoize the builder!\n  const scopedFormApi = useMemo(() => buildScopedFormApi(scope, formApi), [scope]);\n\n  return scopedFormApi;\n}\n\nexport default useScopedApi;\n","import React, { useContext } from 'react';\nimport { FormStateContext } from '../Context';\n\nfunction useFormState() {\n  const formState = useContext(FormStateContext);\n  return formState;\n}\n\nexport default useFormState;\n","import React from 'react';\nimport useFormState from '../hooks/useFormState';\n\nconst Relevant = ({ when, children }) => {\n  const formState = useFormState();\n\n  const isRelevant = when(formState);\n\n  if (isRelevant) {\n    return children;\n  }\n\n  return null;\n};\n\nexport default Relevant;\n","import React, { useContext, useState, useEffect } from 'react';\nimport ObjectMap from '../ObjectMap';\nimport useArrayField from '../hooks/useArrayField';\nimport useFormApi from '../hooks/useFormApi';\nimport useScopedApi from '../hooks/useScopedApi';\nimport Relevant from './Relevant';\nimport {\n  ArrayFieldStateContext,\n  ArrayFieldItemApiContext,\n  ArrayFieldItemStateContext,\n  FormRegisterContext\n} from '../Context';\n\nconst ArrayField = ({ relevant, field, ...props }) => {\n  // Need to get formApi to have consistant interface for relevant function\n  const formApi = useFormApi();\n\n  if (relevant) {\n    const ff = formApi.getFullField(field);\n    const args = {\n      path: ff,\n      parentPath: ff.replace(/(.*)[.[].*/, '$1'),\n      get: (values, path) => ObjectMap.get(values, path)\n    };\n\n    const when = ({ values }) => {\n      return relevant(values, args);\n    };\n\n    return (\n      <Relevant when={when}>\n        <ArrayFieldWrapper field={field} {...props} />\n      </Relevant>\n    );\n  } else {\n    return <ArrayFieldWrapper field={field} {...props} />;\n  }\n};\n\nconst ArrayFieldWrapper = ({ children, ...props }) => {\n  const { render, arrayFieldState, arrayFieldApi, field } = useArrayField(\n    props\n  );\n\n  if (typeof children === 'function') {\n    return render(\n      children({\n        field,\n        arrayFieldApi,\n        arrayFieldState,\n        // Make it easier for user\n        ...arrayFieldApi,\n        ...arrayFieldState\n      })\n    );\n  }\n\n  return render(children);\n};\n\nconst ArrayFieldItem = ({\n  arrayFieldItemState,\n  arrayFieldItemApi,\n  children\n}) => {\n  // Grab the form register context\n  const updater = useContext(FormRegisterContext);\n\n  // Grab the form state\n  const formApi = useFormApi();\n\n  // A little trick I learned in nam to trigger rerender\n  const [state, setState] = useState(0);\n\n  // Keep track of fields that belong to this array field\n  const [fieldsById] = useState(new Map());\n\n  // Get this items field\n  const { field } = arrayFieldItemState;\n\n  // Create scoped api\n  const scopedApi = useScopedApi(field);\n\n  // State generation function\n  const getState = () => {\n    const { values, errors, touched } = formApi.getState();\n    // Get this fields state\n    const itemState = {\n      values: ObjectMap.get(values, field),\n      errors: ObjectMap.get(errors, field),\n      touched: ObjectMap.get(touched, field)\n    };\n    return itemState;\n  };\n\n  // Register for events for rerenders!\n  useEffect(\n    () => {\n      // Define event handler\n      const onChangeHandler = fieldName => {\n        // Example foo.bar.baz[3].baz >>>> foo.bar.baz[3]\n        const magicValue = fieldName.slice(\n          0,\n          fieldName.lastIndexOf('[') != -1\n            ? fieldName.lastIndexOf(']') + 1\n            : fieldName.length\n        );\n\n        // This field updated so trigger rerender\n        if (magicValue === field) {\n          setState(Math.random());\n        }\n      };\n\n      // Register for events\n      formApi.emitter.on('value', onChangeHandler);\n\n      // Unregister events\n      return () => {\n        formApi.emitter.removeListener('value', onChangeHandler);\n      };\n    },\n    [field]\n  );\n\n  // Resets all fields in this item\n  const reset = () => {\n    fieldsById.forEach(fld => {\n      fld.fieldApi.reset();\n    });\n  };\n\n  // Generate the item state\n  const itemState = getState();\n\n  // Wrap the updater to update array fields references\n  const wrappedUpdator = {\n    ...updater,\n    register: (id, fld, initialRender) => {\n      fieldsById.set(id, fld);\n      updater.register(id, fld, initialRender);\n    },\n    deregister: (id, ...args) => {\n      fieldsById.delete(id);\n      updater.deregister(id, ...args);\n    }\n  };\n\n  const arrayFieldItemApiValue = {\n    ...arrayFieldItemApi,\n    ...scopedApi,\n    reset\n  };\n\n  const arrayFieldItemStateValue = {\n    ...arrayFieldItemState,\n    ...itemState\n  };\n\n  if (typeof children === 'function') {\n    return (\n      <FormRegisterContext.Provider value={wrappedUpdator}>\n        <ArrayFieldItemApiContext.Provider value={arrayFieldItemApiValue}>\n          <ArrayFieldItemStateContext.Provider value={arrayFieldItemStateValue}>\n            {children({\n              arrayFieldItemApi: arrayFieldItemApiValue,\n              arrayFieldItemState: arrayFieldItemStateValue,\n              // Make it easier for user\n              ...arrayFieldItemApiValue,\n              ...arrayFieldItemStateValue\n            })}\n          </ArrayFieldItemStateContext.Provider>\n        </ArrayFieldItemApiContext.Provider>\n      </FormRegisterContext.Provider>\n    );\n  }\n\n  return (\n    <FormRegisterContext.Provider value={wrappedUpdator}>\n      <ArrayFieldItemApiContext.Provider value={arrayFieldItemApiValue}>\n        <ArrayFieldItemStateContext.Provider value={arrayFieldItemStateValue}>\n          {children}\n        </ArrayFieldItemStateContext.Provider>\n      </ArrayFieldItemApiContext.Provider>\n    </FormRegisterContext.Provider>\n  );\n};\n\nArrayField.Items = ({ children }) => {\n  const { fields } = useContext(ArrayFieldStateContext);\n  return fields.map(({ arrayFieldItemState, arrayFieldItemApi }) => {\n    const { key } = arrayFieldItemState;\n    return (\n      <ArrayFieldItem\n        key={key}\n        arrayFieldItemApi={arrayFieldItemApi}\n        arrayFieldItemState={arrayFieldItemState}>\n        {children}\n      </ArrayFieldItem>\n    );\n  });\n};\n\nexport default ArrayField;\n","import React, { useContext } from 'react';\nimport { FormRegisterContext } from '../Context';\n\nconst FormComponents = ({ components }) => {\n  // Get the field map off the forms context\n  const { fieldMap } = useContext(FormRegisterContext);\n\n  if (!components) return null;\n\n  return components.map((comp, i) => {\n    const { 'ui:control': componentType } = comp;\n    const Component = fieldMap[componentType];\n    return <Component key={`ui-comp-${i}`} />;\n  });\n};\n\nexport default FormComponents;\n","import React, { useMemo, useContext } from 'react';\nimport { computeFieldsFromSchema } from '../utils';\nimport ArrayField from './form-fields/ArrayField';\nimport Relevant from './Relevant';\nimport Debug from '../debug';\nimport { FormRegisterContext } from '../Context';\n\nconst logger = Debug('informed:FormFields' + '\\t');\n\nconst FormFields = ({ schema, prefix, onlyValidateSchema }) => {\n  // Get the field map off the forms context\n  const { fieldMap } = useContext(FormRegisterContext);\n\n  // Get fields from scheama\n\n  const fields = useMemo(\n    () => {\n      const schemaFields = computeFieldsFromSchema(\n        schema,\n        onlyValidateSchema,\n        prefix\n      );\n\n      const mapedFields = schemaFields.map((schemaField, i) => {\n        const {\n          field,\n          props,\n          type,\n          properties,\n          items,\n          componentType,\n          uiBefore,\n          uiAfter,\n          allOf\n        } = schemaField;\n\n        const Component = fieldMap[componentType];\n\n        // console.log('WTF', schemaField);\n        logger('Rendering Field', field, schemaField);\n\n        // Scope for nested\n        if (!Component && type === 'object' && properties) {\n          return (\n            <FormFields\n              schema={schemaField}\n              prefix={field}\n              key={`ScheamField-${i}`}\n            />\n          );\n        }\n\n        // Array field for array ( if none was provided use our default )\n        if (!Component && type === 'array' && items) {\n          return (\n            <ArrayField\n              key={`ScheamField-${i}`}\n              field={field}\n              items={items}\n              uiBefore={uiBefore}\n              uiAfter={uiAfter}\n              {...props}\n            />\n          );\n        }\n\n        // User created custom array field\n        if (\n          Component &&\n          componentType === 'array' &&\n          items &&\n          type === 'array'\n        ) {\n          return (\n            <Component\n              key={`ScheamField-${i}`}\n              field={field}\n              items={items}\n              uiBefore={uiBefore}\n              uiAfter={uiAfter}\n              {...props}\n            />\n          );\n        }\n\n        // For conditionals\n        if (componentType === 'conditionals') {\n          return allOf.map(conditional => {\n            // Example then ( its a subschema )\n            // then: {\n            //   properties: {\n            //     spouse: {\n            //       type: 'string',\n            //       title: 'Spouse name',\n            //       'ui:control': 'input'\n            //     }\n            //   }\n            // }\n            const subSchema = conditional.then;\n\n            // Turn the if into a when function for informed\n            // Example if condition\n            // if: {\n            //   properties: {\n            //     married: { const: 'yes' }\n            //   },\n            //   required: ['married']\n            // },\n            const { properties: conditions } = conditional.if;\n            const when = ({ values }) => {\n              // Example key \"married, Example condition: \"{ const: 'yes' }\"\n              return Object.keys(conditions).every(key => {\n                const condition = conditions[key];\n                // values.married === 'yes'\n                return values[key] === condition.const;\n              });\n            };\n\n            return (\n              <Relevant key={`ScheamField-${i}`} when={when}>\n                <FormFields schema={subSchema} />\n              </Relevant>\n            );\n          });\n        }\n\n        // If no com ret null ( dont render )\n        if (!Component) {\n          return null;\n        }\n\n        return <Component key={`ScheamField-${i}`} field={field} {...props} />;\n      });\n\n      return mapedFields;\n    },\n    [schema, prefix]\n  );\n\n  return fields;\n};\n\nexport default FormFields;\n","import React from 'react';\nimport InformedArrayField from '../ArrayField';\nimport FormComponents from '../FormComponents';\nimport FormFields from '../FormFields';\n\nconst ArrayField = ({ field, items, uiBefore, uiAfter, ...props }) => {\n  return (\n    <InformedArrayField field={field} {...props}>\n      <FormComponents components={uiBefore} />\n      <InformedArrayField.Items>\n        {({ field }) => (\n          <React.Fragment>\n            <FormComponents components={items['ui:before']} />\n            <FormFields schema={items} prefix={field} />\n            <FormComponents components={items['ui:after']} />\n          </React.Fragment>\n        )}\n      </InformedArrayField.Items>\n      <FormComponents components={uiAfter} />\n    </InformedArrayField>\n  );\n};\n\nexport default ArrayField;\n","import Text from './components/form-fields/Text';\nimport TextArea from './components/form-fields/TextArea';\nimport Select from './components/form-fields/Select';\nimport Checkbox from './components/form-fields/Checkbox';\nimport RadioGroup from './components/form-fields/RadioGroup';\nimport AddButton from './components/form-fields/AddButton';\nimport RemoveButton from './components/form-fields/RemoveButton';\nimport ArrayField from './components/form-fields/ArrayField';\n\nexport default {\n  select: Select,\n  input: Text,\n  textarea: TextArea,\n  checkbox: Checkbox,\n  radio: RadioGroup,\n  add: AddButton,\n  remove: RemoveButton,\n  array: ArrayField\n};\n","import ObjectMap from './ObjectMap';\nimport { EventEmitter } from 'events';\nimport Debug from './debug';\nimport defaultFieldMap from './fieldMap';\nimport { validateYupSchema, validateAjvSchema } from './utils';\n\nconst debug = Debug('informed:Controller' + '\\t');\n\nconst isExpected = (path, expectedRemovals) => {\n  const includedKey = Object.keys(expectedRemovals).find(key =>\n    path.includes(key)\n  );\n  if (!includedKey) return;\n  const start = path.slice(0, includedKey.length);\n  return start === includedKey;\n};\n\nconst noop = () => {};\nclass FormController extends EventEmitter {\n  constructor(options = {}) {\n    // Dont forget to call super! :)\n    super();\n\n    this.options = options;\n\n    const { ajv, schema, fieldMap } = options;\n\n    // Debounced change\n    // const change = () => {\n    //   this.rebuildState();\n    //   this.emit('change');\n    // };\n    // this.change = debounce(change, 250);\n\n    // Create new ajv instance if passed\n    this.ajv = ajv ? new ajv({ allErrors: true }) : null;\n    this.ajvValidate = ajv ? this.ajv.compile(schema) : null;\n\n    // Add field map ( defaults to our field map )\n    this.fieldMap = fieldMap || defaultFieldMap;\n\n    // Map will store all fields by id\n    // Key => uuid\n    // Val => fieldObj\n    // Why? so the form can control the fields!\n    this.fieldsById = new Map();\n\n    // Map will store all fields by name\n    // Key => fieldName - example: \"foo.bar[3].baz\"\n    // Val => fieldObj\n    // Why? so the form can control the fields!\n    this.fieldsByName = {\n      get: name => {\n        let fieldByName;\n        // TODO speed this up maybe\n        this.fieldsById.forEach(value => {\n          if (value && value.field === name) {\n            fieldByName = value;\n          }\n        });\n        return fieldByName;\n      }\n    };\n\n    // Map to store whos on the screen\n    this.onScreen = {};\n\n    // Map to store fields being removed\n    this.expectedRemovals = {};\n    this.pulledOut = {};\n\n    // Map of saved values\n    this.savedValues = {};\n\n    // Initialize the controller state\n    this.state = {\n      pristine: true,\n      dirty: false,\n      invalid: false,\n      submits: 0,\n      step: 0,\n      validating: 0,\n      submitting: false,\n      values: {},\n      errors: {},\n      touched: {}\n    };\n\n    // Initialize a dummy field ( see getField for example use )\n    this.dummyField = {\n      fieldApi: {\n        setValue: noop,\n        setTouched: noop,\n        setError: noop,\n        reset: noop,\n        validate: noop,\n        getValue: noop,\n        getTouched: noop,\n        getError: noop,\n        getFieldState: noop,\n        checkRelevant: noop\n      }\n    };\n\n    // Bind functions that will be called externally\n    this.deregister = this.deregister.bind(this);\n    this.register = this.register.bind(this);\n    this.getValue = this.getValue.bind(this);\n    this.getTouched = this.getTouched.bind(this);\n    this.getError = this.getError.bind(this);\n    this.getErrors = this.getErrors.bind(this);\n    this.setValue = this.setValue.bind(this);\n    this.getValues = this.getValues.bind(this);\n    this.getStep = this.getStep.bind(this);\n    this.setStep = this.setStep.bind(this);\n    this.back = this.back.bind(this);\n    this.next = this.next.bind(this);\n    this.setCurrent = this.setCurrent.bind(this);\n    this.setTouched = this.setTouched.bind(this);\n    this.setError = this.setError.bind(this);\n    this.setFormError = this.setFormError.bind(this);\n    this.submitForm = this.submitForm.bind(this);\n    this.reset = this.reset.bind(this);\n    this.update = this.update.bind(this);\n    this.validate = this.validate.bind(this);\n    this.screenValid = this.screenValid.bind(this);\n    this.keyDown = this.keyDown.bind(this);\n    this.getField = this.getField.bind(this);\n    this.getInitialValue = this.getInitialValue.bind(this);\n    this.setInitialValue = this.setInitialValue.bind(this);\n    this.getOptions = this.getOptions.bind(this);\n    this.getFormState = this.getFormState.bind(this);\n    this.expectRemoval = this.expectRemoval.bind(this);\n    this.getSavedValue = this.getSavedValue.bind(this);\n    this.removeSavedState = this.removeSavedState.bind(this);\n    this.getDerrivedValue = this.getDerrivedValue.bind(this);\n    this.setValues = this.setValues.bind(this);\n    this.resetField = this.resetField.bind(this);\n    this.fieldExists = this.fieldExists.bind(this);\n    this.validateField = this.validateField.bind(this);\n    this.notify = this.notify.bind(this);\n    this.validating = this.validating.bind(this);\n    this.validated = this.validated.bind(this);\n    // this.change = this.change.bind(this);\n    // this.clear = this.clear.bind(this);\n\n    // Updater will be used by fields to update and register\n    this.updater = {\n      register: this.register,\n      deregister: this.deregister,\n      getField: this.getField,\n      update: this.update,\n      // clear: this.clear,\n      fieldMap: this.fieldMap,\n      setValue: (fieldId, value, emit = true) => {\n        const field = this.fieldsById.get(fieldId);\n\n        if (!field.shadow) {\n          ObjectMap.set(\n            this.state.values,\n            field.field,\n            field.fieldApi.getValue()\n          );\n        }\n\n        if (!field.fieldApi.relevant(this.state.values)) {\n          ObjectMap.delete(this.state.values, field.field);\n        }\n\n        // Cleanup phase to get rid of irrelevant fields\n        // Also evaluate relevance on all fields\n        this.fieldsById.forEach(f => {\n          // If a fields within an irrelivant step then remove it\n          // Otherwise, check to see if its relevant and only remove if keep state is false\n          const newRel = f.fieldApi.checkRelevant();\n          if (\n            !f.fieldApi.multistepRelevant(this.state.values) ||\n            (!newRel && !f.keepState)\n          ) {\n            ObjectMap.delete(this.state.values, f.field);\n            ObjectMap.delete(this.state.touched, f.field);\n            ObjectMap.delete(this.state.errors, f.field);\n          }\n        });\n\n        if (emit) {\n          this.emit('change');\n          this.emit('value', field.field, value);\n        }\n      },\n      setTouched: (fieldId, touch, emit = true) => {\n        const field = this.fieldsById.get(fieldId);\n\n        if (!field.shadow && field.fieldApi.getIsRelevant()) {\n          ObjectMap.set(\n            this.state.touched,\n            field.field,\n            field.fieldApi.getTouched()\n          );\n        }\n\n        // Shadow values override unless undefined\n        if (\n          field.shadow &&\n          field.fieldApi.getError() != undefined &&\n          field.fieldApi.relevant(this.state.values)\n        ) {\n          ObjectMap.set(\n            this.state.touched,\n            field.field,\n            field.fieldApi.getTouched()\n          );\n        }\n        if (emit) {\n          this.emit('change');\n          //this.emit('touch', field.field, touch);\n        }\n      },\n      setError: (fieldId, error, emit = true) => {\n        const field = this.fieldsById.get(fieldId);\n\n        if (!field.shadow && field.fieldApi.getIsRelevant()) {\n          ObjectMap.set(\n            this.state.errors,\n            field.field,\n            field.fieldApi.getError()\n          );\n        }\n\n        // Shadow values override unless undefined\n        const currentError = ObjectMap.get(this.state.errors, field.field);\n        if (\n          field.shadow &&\n          field.fieldApi.getError() != undefined &&\n          field.fieldApi.relevant(this.state.values)\n        ) {\n          ObjectMap.set(\n            this.state.errors,\n            field.field,\n            field.fieldApi.getError()\n          );\n        }\n\n        // Special case for attempting to set shadow to undefiend\n        else if (\n          field.shadow &&\n          field.fieldApi.getError() === undefined &&\n          field.fieldApi.relevant(this.state.values) &&\n          // TODO maybe check if object or array\n          typeof currentError === 'string'\n        ) {\n          ObjectMap.set(\n            this.state.errors,\n            field.field,\n            field.fieldApi.getError()\n          );\n        }\n\n        if (emit) {\n          this.emit('change');\n          //this.emit('error', field.field, error);\n        }\n      },\n      expectRemoval: this.expectRemoval,\n      getInitialValue: this.getInitialValue\n    };\n\n    // Define the formApi\n    this.formApi = {\n      setValue: this.setValue,\n      setTouched: this.setTouched,\n      setError: this.setError,\n      setFormError: this.setFormError,\n      setValues: this.setValues,\n      setInitialValue: this.setInitialValue,\n      getValue: this.getValue,\n      getTouched: this.getTouched,\n      getError: this.getError,\n      reset: this.reset,\n      submitForm: this.submitForm,\n      getState: this.getFormState,\n      getValues: this.getValues,\n      getFullField: this.getFullField,\n      fieldExists: this.fieldExists,\n      getInitialValue: this.getInitialValue,\n      validate: this.validate,\n      validateField: this.validateField,\n      screenValid: this.screenValid,\n      resetField: this.resetField,\n      getOptions: this.getOptions,\n      emitter: this,\n      getSavedValue: this.getSavedValue,\n      removeSavedState: this.removeSavedState,\n      getDerrivedValue: this.getDerrivedValue,\n      getStep: this.getStep,\n      setStep: this.setStep,\n      next: this.next,\n      back: this.back,\n      setCurrent: this.setCurrent,\n      validated: this.validated,\n      validating: this.validating\n    };\n\n    this.on('value', field => {\n      // The forms values have changed so we want to clear form level error\n      delete this.state.error;\n      this.notify(field);\n    });\n  }\n\n  /* ---------------------------------- Setters ---------------------------------- */\n\n  setOptions(options) {\n    this.options = options;\n  }\n\n  setValue(name, value, options) {\n    this.getField(name).fieldApi.setValue(value, null, {\n      allowEmptyString: this.options.allowEmptyStrings,\n      ...options\n    });\n  }\n\n  setTouched(name, value) {\n    this.getField(name).fieldApi.setTouched(value);\n  }\n\n  setError(name, value) {\n    this.getField(name).fieldApi.setError(value);\n  }\n\n  setFormError(value) {\n    this.state.error = value;\n    this.emit('change');\n  }\n\n  validating() {\n    this.state.validating = this.state.validating + 1;\n    this.emit('change');\n  }\n\n  validated(name, error) {\n    // Decrement the validating\n    this.state.validating = this.state.validating - 1;\n\n    // Set the error if there is not already one ( sync error first )\n    if (!this.getError(name)) {\n      this.setError(name, error);\n    }\n\n    // If we are not still validating, and we were submitting, then submit form\n    // If we are async validating then dont submit yet\n    if (this.state.validating > 0) {\n      this.emit('change');\n      return;\n    }\n\n    // If we were submitting\n    if (this.state.submitting) {\n      // Check validity and perform submission if valid\n      if (this.valid()) {\n        debug('Submit', this.state);\n        this.emit('submit');\n      } else {\n        debug('Submit', this.state);\n        this.emit('failure');\n      }\n      this.state.submitting = false;\n    }\n\n    this.emit('change');\n  }\n\n  setStep(value) {\n    this.state.step = value;\n    this.emit('change');\n  }\n\n  setCurrent(component) {\n    this.state.Current = component;\n    this.emit('change');\n  }\n\n  back(prevComponent) {\n    this.state.step = this.state.step - 1;\n\n    this.state.Current = prevComponent;\n\n    this.emit('change');\n  }\n\n  next(nextComponent) {\n    // Validate the entire form\n    this.validate();\n\n    // If fields on the screen ( currently rendered ) are valid move on\n    if (this.screenValid()) {\n      this.state.step = this.state.step + 1;\n      this.state.Current = nextComponent;\n    }\n\n    // State will have changed\n    this.emit('change');\n  }\n\n  setInitialValue(field, value) {\n    ObjectMap.set(this.options.initialValues, field, value);\n  }\n\n  /* ---------------------------------- Getters ---------------------------------- */\n\n  /**\n   * Generate the external form state that will be exposed to the users\n   *\n   * @returns Form State\n   */\n  getFormState() {\n    debug('Returning form state');\n    return {\n      ...this.state,\n      pristine: this.pristine(),\n      dirty: this.dirty(),\n      invalid: this.invalid()\n    };\n  }\n\n  // rebuildState() {\n  //   debug('Generating form state');\n\n  //   // Rebuild values, errors, and touched\n  //   const values = {};\n  //   const errors = {};\n  //   const touched = {};\n\n  //   this.fieldsById.forEach(field => {\n  //     if (!field.shadow) {\n  //       // Get the values from the field\n  //       const value = field.fieldApi.getValue();\n  //       const error = field.fieldApi.getError();\n  //       const t = field.fieldApi.getTouched();\n  //       // Set the value\n  //       ObjectMap.set(values, field.field, value);\n  //       ObjectMap.set(errors, field.field, error);\n  //       ObjectMap.set(touched, field.field, t);\n  //       // console.log('SETTING', field.field);\n  //     }\n  //   });\n\n  //   this.state = {\n  //     ...this.state,\n  //     values,\n  //     errors,\n  //     touched,\n  //     pristine: this.pristine(),\n  //     dirty: this.dirty(),\n  //     invalid: this.invalid()\n  //   };\n  // }\n\n  getFormApi() {\n    return this.formApi;\n  }\n\n  getDerrivedValue(name) {\n    const values = this.getValues();\n    return ObjectMap.get(values, name);\n  }\n\n  getValue(name) {\n    const value = this.getField(name).fieldApi.getValue();\n    debug('Getting value for', name, value);\n    return value;\n  }\n\n  getTouched(field) {\n    const touched = this.getField(field).fieldApi.getTouched();\n    debug('Getting touched for', field, touched);\n    return touched;\n  }\n\n  getError(field) {\n    const error = this.getField(field).fieldApi.getError();\n    debug('Getting error for', field, error);\n    return error;\n  }\n\n  getValues() {\n    debug('Gettings values');\n    return this.state.values;\n  }\n\n  getAllTouched() {\n    debug('Gettings touched');\n    return this.state.touched;\n  }\n\n  getErrors() {\n    debug('Gettings errors');\n    return this.state.errors;\n  }\n\n  getOptions() {\n    return this.options;\n  }\n\n  getStep() {\n    return this.state.step;\n  }\n\n  getSavedValue(name) {\n    const field = this.fieldsByName.get(name);\n    if (field && field.shadow) {\n      return ObjectMap.get(this.savedValues, `shadow-${name}`);\n    }\n    return ObjectMap.get(this.savedValues, name);\n  }\n\n  removeSavedState(name) {\n    const field = this.fieldsByName.get(name);\n    if (field && field.shadow) {\n      return ObjectMap.delete(this.savedValues, `shadow-${name}`);\n    }\n    return ObjectMap.delete(this.savedValues, name);\n  }\n\n  getFullField(field) {\n    return field;\n  }\n\n  getInitialValue(field) {\n    return ObjectMap.get(this.options.initialValues, field);\n  }\n\n  getField(name) {\n    debug('Getting Field', name);\n    const field = this.fieldsByName.get(name);\n    if (!field) {\n      // eslint-disable-next-line no-console\n      console.warn(`Attempting to get field ${name} but it does not exist`);\n      // Prevent app from crashing\n      return this.dummyField;\n    }\n    return field;\n  }\n\n  // Notify other fields\n  notify(field) {\n    // Example field - siblings[0].married\n    // Get the notifier\n    const notifier = this.getField(field);\n    // If we have a list we must notify each one\n    if (notifier && notifier.notify) {\n      // Example: ['spouse']\n      notifier.notify.forEach(fieldName => {\n        // Get the field toNotify\n        const JSPAN = `.${field}`;\n        const path = `${JSPAN.replace(/(.*)[.[].*/, '$1')}.${fieldName}`.slice(\n          1\n        );\n        // console.log('PATH', path);\n        // Example path - siblings[0].spouse\n        const toNotify = this.getField(path);\n        if (toNotify) {\n          debug('Notifying', toNotify.field);\n          toNotify.fieldApi.validate();\n          toNotify.fieldApi.checkRelevant();\n        }\n      });\n    }\n  }\n\n  validateField(field) {\n    this.getField(field).fieldApi.validate();\n  }\n\n  resetField(field) {\n    this.getField(field).fieldApi.reset();\n  }\n\n  fieldExists(field) {\n    return this.fieldsByName.get(field) != null;\n  }\n\n  valid() {\n    const errors = this.getErrors();\n    return !!(ObjectMap.empty(errors) && !this.state.error);\n  }\n\n  screenValid() {\n    // Return false if any of the fields on the screen are invalid\n    const error = Object.entries(this.onScreen).some(([, field]) =>\n      field.fieldApi.getError()\n    );\n    return !error;\n  }\n\n  invalid() {\n    const errors = this.getErrors();\n    return !!(!ObjectMap.empty(errors) || this.state.error);\n  }\n\n  pristine() {\n    const touched = this.getAllTouched();\n    const values = this.getValues();\n    return ObjectMap.empty(touched) && ObjectMap.empty(values);\n  }\n\n  dirty() {\n    return !this.pristine();\n  }\n\n  reset() {\n    debug('Resetting');\n    // So because all fields controll themselves and, \"inform\", this controller\n    // of their changes, we need to literally itterate through all registered fields\n    // and reset them. Not a big deal but very important to remember that you cant simply\n    // reset this controllers state!\n    this.fieldsById.forEach(field => {\n      field.fieldApi.reset({ preventUpdate: true });\n    });\n    this.emit('reset');\n    this.emit('change');\n  }\n\n  setValues(values) {\n    debug('Setting values');\n    // So we because all fields controll themselves and, \"inform\", this controller\n    // of their changes, we need to literally itterate through all registered fields\n    // and set them. Not a big deal but very important to remember that you cant simply\n    // set this controllers state!\n    this.fieldsById.forEach(field => {\n      // Initialize the values if it needs to be\n      const value = ObjectMap.get(values, field.field);\n      if (value !== undefined) {\n        field.fieldApi.setValue(value, null, { preventUpdate: true });\n      }\n    });\n\n    this.emit('change');\n  }\n\n  validate() {\n    debug('Validating all fields');\n\n    const values = this.getValues();\n\n    // Validate schema if needed\n    if (this.options.validationSchema) {\n      const errors = validateYupSchema(this.options.validationSchema, values);\n      // So we because all fields controll themselves and, \"inform\", this controller\n      // of their changes, we need to literally itterate through all registered fields\n      // and set them. Not a big deal but very important to remember that you cant simply\n      // set this controllers state!\n      this.fieldsById.forEach(field => {\n        // Check to see if there is an error to set\n        // Note: we use has becuause value may be there but undefined\n        if (ObjectMap.has(errors, field.field)) {\n          const error = ObjectMap.get(errors, field.field);\n          // If there is an error then set it\n          this.setError(field.field, error);\n        } else {\n          // If we are doing schema validation then we need to clear out any old errors\n          this.setError(field.field, undefined);\n        }\n      });\n    }\n\n    // Validate AJV schema if needed\n    if (this.options.schema && this.options.ajv) {\n      const errors = validateAjvSchema(this.ajvValidate, values);\n      // So we because all fields controll themselves and, \"inform\", this controller\n      // of their changes, we need to literally itterate through all registered fields\n      // and set them. Not a big deal but very important to remember that you cant simply\n      // set this controllers state!\n      this.fieldsById.forEach(field => {\n        // Check to see if there is an error to set\n        // Note: we use has becuause value may be there but undefined\n        if (ObjectMap.has(errors, field.field)) {\n          const error = ObjectMap.get(errors, field.field);\n          // If there is an error then set it\n          this.setError(field.field, error);\n        } else {\n          // If we are doing schema validation then we need to clear out any old errors\n          this.setError(field.field, undefined);\n        }\n      });\n    }\n\n    // Itterate through and call validate on every field\n    this.fieldsById.forEach(field => {\n      field.fieldApi.validate(values);\n      // Second param to prevent validation\n      field.fieldApi.setTouched(true, true);\n    });\n\n    // Call the form level validation if its present\n    if (this.options.validate) {\n      const res = this.options.validate(values);\n      this.setFormError(res);\n    }\n\n    // Call the forms field level validation\n    if (this.options.validateFields) {\n      const errors = this.options.validateFields(values);\n      // So we because all fields controll themselves and, \"inform\", this controller\n      // of their changes, we need to literally itterate through all registered fields\n      // and set them. Not a big deal but very important to remember that you cant simply\n      // set this controllers state!\n      this.fieldsById.forEach(field => {\n        // Check to see if there is an error to set\n        // Note: we use has becuause value may be there but undefined\n        if (ObjectMap.has(errors, field.field)) {\n          const error = ObjectMap.get(errors, field.field);\n          // If there is an error then set it\n          this.setError(field.field, error);\n        }\n      });\n    }\n  }\n\n  asyncValidate() {\n    debug('Async Validating all fields');\n    const values = this.getValues();\n\n    // Itterate through and call validate on every field\n    this.fieldsById.forEach(field => {\n      field.fieldApi.asyncValidate(values);\n    });\n  }\n\n  keyDown(e) {\n    // If preventEnter then return\n    if (e.keyCode == 13 && this.options.preventEnter) {\n      e.preventDefault(e);\n      return false;\n    }\n  }\n\n  submitForm(e) {\n    // Incriment number of submit attempts\n    this.state.submits = this.state.submits + 1;\n    this.state.submitting = true;\n\n    if (!this.options.dontPreventDefault && e) {\n      // Prevent default browser form submission\n      e.preventDefault(e);\n    }\n\n    // Validate the form\n    this.validate();\n\n    // Emit a change\n    this.emit('change');\n\n    // Trigger all async validations\n    this.asyncValidate();\n\n    // If we are async validating then dont submit yet\n    if (this.state.validating > 0) {\n      return;\n    }\n\n    // Check validity and perform submission if valid\n    if (this.valid()) {\n      debug('Submit', this.state);\n      this.emit('submit');\n    } else {\n      debug('Submit', this.state);\n      this.emit('failure');\n    }\n\n    this.state.submitting = false;\n\n    this.emit('change');\n  }\n\n  /* ---------------- Updater Functions (used by fields) ---------------- */\n\n  // ADDED initialRender parameter because of react 16.13.0 warning that does not like\n  // setting initial value during first render\n  register(id, field, initialRender) {\n    const { field: name, state } = field;\n    debug('Register ID:', id, 'Name:', name, state, 'Initial', initialRender);\n\n    // Example foo.bar.baz[3].baz >>>> foo.bar.baz[3]\n    const magicValue = name.slice(\n      0,\n      name.lastIndexOf('[') != -1 ? name.lastIndexOf(']') + 1 : name.length\n    );\n\n    // Field might be coming back after render remove old field\n    let alreadyRegistered;\n    this.fieldsById.forEach((value, key) => {\n      if (value && value.field === name) {\n        alreadyRegistered = key;\n      }\n    });\n\n    if (\n      //!this.expectedRemovals[magicValue] &&\n      alreadyRegistered &&\n      (field.keepState || field.inMultistep)\n    ) {\n      debug('Already Registered', name);\n      this.fieldsById.delete(alreadyRegistered);\n    } else if (\n      //!this.expectedRemovals[magicValue] &&\n      alreadyRegistered &&\n      (!field.keepState || !field.inMultistep)\n    ) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        'Check to make sure you have not registered two fields with the fieldName',\n        name\n      );\n    }\n\n    debug('Fields Registered', this.fieldsById.size);\n\n    // The field is on the screen\n    this.onScreen[id] = field;\n\n    // Always register the field\n    this.fieldsById.set(id, field);\n\n    // Always clear out expected removals when a reregistering array field comes in\n    debug('clearing expected removal', magicValue);\n    delete this.expectedRemovals[magicValue];\n    delete this.pulledOut[magicValue];\n\n    // The field is a shadow field ooo spooky so dont set anything\n    if (field.shadow) {\n      return;\n    }\n\n    // Update the forms state right away\n    this.updater.setValue(id, field.fieldApi.getValue(), false);\n    this.updater.setError(id, field.fieldApi.getError(), false);\n    this.updater.setTouched(id, field.fieldApi.getTouched(), false);\n\n    // We register field right away but dont want it to triger a rerender\n    if (!initialRender) {\n      this.emit('change');\n    }\n  }\n\n  deregister(id) {\n    const field = this.fieldsById.get(id);\n    const { field: name } = field;\n    debug('Deregister', id, name);\n\n    // The field is off the screen\n    delete this.onScreen[id];\n\n    // Example foo.bar.baz[3] --> foo.bar.baz[3].baz && foo.bar.baz[3].taz.raz[4].naz\n    const expectedRemoval = isExpected(name, this.expectedRemovals);\n\n    // Example foo.bar.baz[3].baz >>>> foo.bar.baz[3]\n    const magicValue = name.slice(\n      0,\n      name.lastIndexOf('[') != -1 ? name.lastIndexOf(']') + 1 : name.length\n    );\n\n    // If the fields state is to be kept then save the value\n    if (\n      // We are in a multistep or want to keep the state\n      (field.keepState || field.inMultistep) &&\n      // We are NOT expected to be removed\n      !expectedRemoval\n    ) {\n      // TODO ?? Exception where the field is irrelivant AND keep state was not passed ??\n      debug(`Saving field ${name}'s value`, field.fieldApi.getFieldState());\n      if (!field.shadow) {\n        ObjectMap.set(this.savedValues, name, field.fieldApi.getFieldState());\n      } else {\n        // We are shadow field and will store this value in the shadows\n        ObjectMap.set(\n          this.savedValues,\n          `shadow-${name}`,\n          field.fieldApi.getFieldState()\n        );\n      }\n    }\n\n    // Remove if its an expected removal OR we dont have keep state\n    if (\n      // This field was expected to be removed\n      expectedRemoval ||\n      // This field does not have keepstate and is NOT within a multistep\n      (!field.keepState && !field.inMultistep) ||\n      // If field is in multistep then we would always keep due to field.inMultistep\n      // BUT.. we need to also check if the field is irrelivant\n      // because if it gets unmounted, even if its part of a multistep, we want to remove\n      // the field completley, unless keep state was passed.\n      (!field.fieldApi.getIsRelevant() && !field.keepState)\n    ) {\n      // Remove the field completley\n      debug('Removing field', name);\n      this.fieldsById.delete(id);\n      // Clean up state only if its not expected removal, otherwise we will just pull it out\n      if (!expectedRemoval) {\n        ObjectMap.delete(this.state.values, name);\n        ObjectMap.delete(this.state.touched, name);\n        ObjectMap.delete(this.state.errors, name);\n\n        if (!field.shadow) {\n          ObjectMap.delete(this.savedValues, name);\n        } else {\n          ObjectMap.delete(this.savedValues, `shadow-${name}`);\n        }\n      }\n\n      // If we expected this removal then pullOut\n      if (expectedRemoval && this.pulledOut[magicValue]) {\n        debug('Pulling out', name, 'with magic value', magicValue);\n        ObjectMap.pullOut(this.state.values, magicValue);\n        ObjectMap.pullOut(this.state.touched, magicValue);\n        ObjectMap.pullOut(this.state.errors, magicValue);\n        ObjectMap.pullOut(this.savedValues, magicValue);\n        // console.log('Pull1', this.state.values);\n        // console.log('Pull2', this.savedValues);\n        delete this.pulledOut[magicValue];\n      }\n    }\n\n    this.emit('change');\n  }\n\n  expectRemoval(name) {\n    debug('Expecting removal of', name);\n    this.expectedRemovals[name] = true;\n    this.pulledOut[name] = true;\n  }\n\n  update(id, field, oldName) {\n    debug('Update', id, field.field, oldName, field.fieldState.value);\n    // this.change();\n    // Update the error touched and values of this field\n    const value = field.fieldApi.getValue();\n    const error = field.fieldApi.getError();\n    const t = field.fieldApi.getTouched();\n\n    // Clear the old value out\n    const oldField = this.fieldsByName.get(oldName);\n    // Only clear if we had an old name ( our name changed )\n    // %% the oldField is gone!\n    if (oldName && !oldField) {\n      // Setting nothing sets to undefined and does NOT pull out\n      ObjectMap.set(this.state.values, oldName);\n      ObjectMap.set(this.state.errors, oldName);\n      ObjectMap.set(this.state.touched, oldName);\n    }\n\n    // Set the value\n    ObjectMap.set(this.state.values, field.field, value);\n    ObjectMap.set(this.state.errors, field.field, error);\n    ObjectMap.set(this.state.touched, field.field, t);\n\n    this.emit('change');\n  }\n}\n\nexport default FormController;\n","import React from 'react';\nimport { FormStateContext, FormApiContext, FormRegisterContext } from '../Context';\nimport Debug from '../debug';\nimport useForm from '../hooks/useForm';\n\nconst logger = Debug('informed:FormProvider' + '\\t\\t');\n\nconst FormProvider = ({ \n  children, \n  formApi, \n  formController,\n  formState, \n  ...rest\n}) => {\n\n  logger('Render FormProvider');\n\n  if( formApi ){\n    logger('Render FormProvider with given values');\n    /* --- Create Provider with given values and render Content --- */\n    return (\n      <FormRegisterContext.Provider value={formController.updater}>\n        <FormApiContext.Provider value={formApi}>\n          <FormStateContext.Provider value={formState}>\n            {children}\n          </FormStateContext.Provider>\n        </FormApiContext.Provider>\n      </FormRegisterContext.Provider>\n    );\n  } \n\n  logger('Render FormProvider with generated values');\n  /* --- User did not pass values so create them --- */\n  const value = useForm(rest);\n\n  return (\n    <FormRegisterContext.Provider value={value.formController.updater}>\n      <FormApiContext.Provider value={value.formApi}>\n        <FormStateContext.Provider value={value.formState}>\n          {children}\n        </FormStateContext.Provider>\n      </FormApiContext.Provider>\n    </FormRegisterContext.Provider>\n  );\n  \n};\n\nexport default FormProvider;\n","import React, { useState, useEffect, useMemo } from 'react';\nimport Debug from '../debug';\nimport FormController from '../FormController';\nimport FormProvider from '../components/FormProvider';\nimport FormFields from '../components/FormFields';\nimport useLayoutEffect from './useIsomorphicLayoutEffect';\n\nconst logger = Debug('informed:useForm' + '\\t\\t');\n\nconst useForm = ({\n  dontPreventDefault,\n  initialValues,\n  validate,\n  validateFields,\n  allowEmptyStrings,\n  preventEnter,\n  getApi,\n  apiRef,\n  onChange,\n  onReset,\n  onSubmit,\n  onValueChange,\n  onSubmitFailure,\n  validationSchema,\n  schema,\n  ajv,\n  fieldMap,\n  onlyValidateSchema,\n  ...userProps\n}) => {\n  logger('Render useForm');\n\n  // Generate form controller options\n  const formControllerOptions = useMemo(\n    () => ({\n      dontPreventDefault,\n      initialValues,\n      validate,\n      validateFields,\n      allowEmptyStrings,\n      preventEnter,\n      validationSchema,\n      schema,\n      ajv,\n      fieldMap\n    }),\n    [\n      dontPreventDefault,\n      initialValues,\n      validate,\n      validateFields,\n      allowEmptyStrings,\n      preventEnter,\n      validationSchema,\n      schema,\n      ajv,\n      fieldMap\n    ]\n  );\n\n  // Create form controller\n  const [formController] = useState(\n    () => new FormController(formControllerOptions)\n  );\n\n  // Update the options when they change\n  useEffect(\n    () => {\n      formController.setOptions(formControllerOptions);\n    },\n    [formControllerOptions]\n  );\n\n  // Form state will be used to trigger rerenders\n  const [formState, setFormState] = useState(() =>\n    formController.getFormState()\n  );\n\n  // Register for events\n  useLayoutEffect(\n    () => {\n      const onChangeHandler = () =>\n        onChange && onChange(formController.getFormState());\n      const onResetHandler = () => onReset && onReset();\n      const onSubmitHandler = () =>\n        onSubmit && onSubmit(formController.getFormState().values);\n      const onValueHandler = () =>\n        onValueChange && onValueChange(formController.getFormState().values);\n      const onFailureHandler = () =>\n        onSubmitFailure &&\n        onSubmitFailure(formController.getFormState().errors);\n\n      // Register for events\n      formController.on('change', onChangeHandler);\n      formController.on('reset', onResetHandler);\n      formController.on('submit', onSubmitHandler);\n      formController.on('value', onValueHandler);\n      formController.on('failure', onFailureHandler);\n\n      // Unregister events\n      return () => {\n        formController.removeListener('change', onChangeHandler);\n        formController.removeListener('reset', onResetHandler);\n        formController.removeListener('submit', onSubmitHandler);\n        formController.removeListener('value', onValueHandler);\n        formController.removeListener('failure', onFailureHandler);\n      };\n    },\n    [onChange, onReset, onSubmit, onValueChange, onSubmitFailure]\n  );\n\n  // Initialize code like constructor but not muhahah\n  useState(() => {\n    // Update the form state to trigger rerender!\n    const onChangeHandlerRerender = () => {\n      logger('Setting form state');\n      setFormState(formController.getFormState());\n    };\n    // const debounced = debounce(onChangeHandlerRerender, 250);\n    formController.on('change', onChangeHandlerRerender);\n    // Give access to api outside\n    if (getApi) {\n      getApi(formController.getFormApi());\n    }\n    if (apiRef) {\n      apiRef.current = formController.getFormApi();\n    }\n  });\n\n  // We dont want this to happen on every render so thats why useState is used here\n  const [formApi] = useState(() => formController.getFormApi());\n\n  // TODO technically speaking this can be unsafe as there is circular dependency\n  // between form provider and useForm.. Its ok because anyone that in theory\n  // Uses a form provider and a use form hook themselves will never call the render\n  // function created here... that being said I will look into fixing that warning\n  // at some point :)\n  const render = children => (\n    <FormProvider\n      formApi={formApi}\n      formState={formState}\n      formController={formController}>\n      <>\n        {!children ? (\n          <FormFields schema={schema} onlyValidateSchema={onlyValidateSchema} />\n        ) : (\n          children\n        )}\n      </>\n    </FormProvider>\n  );\n\n  return { formApi, formState, formController, render, userProps };\n};\n\nexport default useForm;\n","import React from 'react';\nimport Debug from '../debug';\nimport useForm from '../hooks/useForm';\n\nconst debug = Debug('informed:Form' + '\\t\\t');\n\nconst Form = ({ \n  children, \n  render: renderProp,\n  component,\n  ...rest }) => {\n\n  debug('Render FORM');\n\n  const { \n    formApi, \n    formController,\n    formState, \n    render,\n    userProps\n  } = useForm(rest);\n    \n  const getContent = () => {\n\n    const props = {\n      formState,\n      formApi\n    };\n\n    if (component) {\n      return React.createElement(component, props, children);\n    }\n    if (renderProp) {\n      return renderProp(props);\n    }\n    if (typeof children === 'function') {\n      return children(props);\n    }\n    return children;\n  };\n  \n  /* --- Render Content --- */\n  return render(\n    <form\n      {...userProps}\n      onReset={formController.reset}\n      onSubmit={formController.submitForm}\n      onKeyDown={formController.keyDown}>\n      {getContent()}\n    </form>  \n  );\n  \n};\n\nexport default Form;\n","import React, { useContext, useMemo } from 'react';\nimport {\n  FormRegisterContext,\n  FormStateContext,\n  FormApiContext\n} from '../Context';\nimport useFormApi from '../hooks/useFormApi';\nimport useFormState from '../hooks/useFormState';\n\nconst buildScopedFormApi = (scope, formApi) => {\n  return {\n    ...formApi,\n    getValue: field => formApi.getValue(`${scope}.${field}`),\n    getTouched: field => formApi.getTouched(`${scope}.${field}`),\n    getError: field => formApi.getError(`${scope}.${field}`),\n    setValue: (field, value) => formApi.setValue(`${scope}.${field}`, value),\n    setTouched: (field, value) =>\n      formApi.setTouched(`${scope}.${field}`, value),\n    setError: (field, value) => formApi.setError(`${scope}.${field}`, value),\n    getInitialValue: field => formApi.getInitialValue(`${scope}.${field}`),\n    getFullField: field => `${formApi.getFullField(scope)}.${field}`\n  };\n};\n\nconst buildScopedRegister = (scope, formRegister) => {\n  const {\n    register,\n    deregister,\n    setValue,\n    setTouched,\n    setError,\n    update,\n    getField,\n    expectRemoval,\n    getInitialValue,\n    fieldMap\n  } = formRegister;\n\n  return {\n    register: (field, ...args) => register(`${scope}.${field}`, ...args),\n    deregister: (field, ...args) => deregister(`${scope}.${field}`, ...args),\n    update: (field, ...args) => update(`${scope}.${field}`, ...args),\n    setValue: (field, ...args) => setValue(`${scope}.${field}`, ...args),\n    setTouched: (field, ...args) => setTouched(`${scope}.${field}`, ...args),\n    setError: (field, ...args) => setError(`${scope}.${field}`, ...args),\n    getField: (field, ...args) => getField(`${scope}.${field}`, ...args),\n    expectRemoval: (field, ...args) =>\n      expectRemoval(`${scope}.${field}`, ...args),\n    getInitialValue: field => getInitialValue(`${scope}.${field}`),\n    fieldMap\n  };\n};\n\nconst Scope = ({ scope, children }) => {\n  const formRegister = useContext(FormRegisterContext);\n  const formApi = useFormApi();\n  const formState = useFormState();\n\n  // VERY important to memoize the builders!\n  const scopedFormApi = useMemo(() => buildScopedFormApi(scope, formApi), [\n    scope\n  ]);\n  const scopedRegister = useMemo(\n    () => buildScopedRegister(scope, formRegister),\n    [scope]\n  );\n\n  return (\n    <FormRegisterContext.Provider value={scopedRegister}>\n      <FormApiContext.Provider value={scopedFormApi}>\n        <FormStateContext.Provider value={formState}>\n          {children}\n        </FormStateContext.Provider>\n      </FormApiContext.Provider>\n    </FormRegisterContext.Provider>\n  );\n};\n\nexport default Scope;\n","import React from 'react';\n\nimport useFormState from '../hooks/useFormState';\n\nconst FormState = props => {\n  const formState = useFormState();\n\n  let displayState = {};\n\n  if (Object.keys(props).length > 0) {\n    Object.keys(props).forEach(key => {\n      displayState[key] = formState[key];\n    });\n  } else {\n    displayState = formState;\n  }\n\n  const {\n    pristine,\n    dirty,\n    invalid,\n    values,\n    errors,\n    touched,\n    validating,\n    submitting\n  } = displayState;\n  return (\n    <pre>\n      <code>\n        {JSON.stringify(\n          {\n            pristine,\n            dirty,\n            invalid,\n            values,\n            errors,\n            touched,\n            validating,\n            submitting\n          },\n          null,\n          2\n        )}\n      </code>\n    </pre>\n  );\n};\n\nexport default FormState;\n","import React, { useState } from 'react';\nimport { MultistepApiContext, MultistepStateContext } from '../Context';\nimport useFormApi from './useFormApi';\nimport useStateWithGetter from './useStateWithGetter';\n\nconst useMultistep = ({ initialStep, multistepApiRef }) => {\n  // Get the formApi\n  const { getValues, validate, screenValid } = useFormApi();\n\n  // Track our steps by name\n  const [stepsByName] = useState(new Map());\n\n  // Define our state\n  const [\n    multistepState,\n    setMultistepState,\n    getMultistepState\n  ] = useStateWithGetter({\n    current: initialStep,\n    steps: []\n  });\n\n  // Define our api\n  const [multistepApi] = useState(() => {\n    const getCurrentStep = () => {\n      // Get the current state\n      const { current } = getMultistepState();\n      // Get the current step\n      const currentStep = stepsByName.get(current);\n      // Return it\n      return currentStep;\n    };\n\n    const api = {\n      // Gets the whole state\n      getState: () => getMultistepState(),\n      // Gets just the current\n      getCurrentStep,\n      // Gets that step\n      getStep: name => stepsByName.get(name),\n      // Goes to next step\n      next: () => {\n        // Validate the entire form\n        validate();\n\n        // If fields on the screen ( currently rendered ) are valid move on\n        if (screenValid()) {\n          // Get the current step\n          const { getNext } = getCurrentStep();\n          const next = getNext();\n          // Determine what the next step should be\n          const nextStep =\n            typeof next === 'function' ? next(getValues()) : next;\n          // Determine if it has a next\n          if (nextStep) {\n            setMultistepState(prev => ({\n              ...prev,\n              current: nextStep\n            }));\n          }\n        }\n      },\n      // Goes to previous step\n      back: () => {\n        // Get the current step\n        const { getPrevious } = getCurrentStep();\n        const previous = getPrevious();\n        // Determine what the previous step should be\n        const previousStep =\n          typeof previous === 'function' ? previous(getValues()) : previous;\n        // Determine if it has a previous\n        if (previousStep) {\n          setMultistepState(prev => ({\n            ...prev,\n            current: previousStep\n          }));\n        }\n      },\n      // Goes to specified step\n      setCurrent: next => {\n        // Determine if it has a next\n        if (next) {\n          setMultistepState(prev => ({\n            ...prev,\n            current: next\n          }));\n        }\n      },\n      // Registers the step\n      register: (name, step, initial) => {\n        stepsByName.set(name, step);\n        if (!initial) {\n          setMultistepState(prev => ({\n            ...prev,\n            steps: Array.from(stepsByName.keys())\n          }));\n        }\n      },\n      // Deregisters the step\n      deregister: name => {\n        stepsByName.delete(name);\n        setMultistepState(prev => ({\n          ...prev,\n          steps: Array.from(stepsByName.keys())\n        }));\n      }\n    };\n\n    if (multistepApiRef) {\n      multistepApiRef.current = api;\n    }\n\n    return api;\n  });\n\n  // Render funtion that will provide state and api\n  const render = children => (\n    <MultistepApiContext.Provider value={multistepApi}>\n      <MultistepStateContext.Provider value={multistepState}>\n        {children}\n      </MultistepStateContext.Provider>\n    </MultistepApiContext.Provider>\n  );\n\n  return {\n    ...multistepApi,\n    ...multistepState,\n    render\n  };\n};\n\nexport default useMultistep;\n","import React, { useContext } from 'react';\nimport { MultistepStateContext } from '../Context';\n\nfunction useMultistepState() {\n  return useContext(MultistepStateContext);\n}\n\nexport default useMultistepState;\n","import React, { useContext } from 'react';\nimport { MultistepApiContext } from '../Context';\n\nfunction useMultistepApi() {\n  return useContext(MultistepApiContext);\n}\n\nexport default useMultistepApi;\n","import React, { useEffect, useRef, useState } from 'react';\nimport useMultistepState from './useMultistepState';\nimport useFormState from './useFormState';\nimport useMultistepApi from './useMultistepApi';\nimport { MultistepStepContext } from '../Context';\n\nconst useMultistepStep = ({ step, next, previous, relevant }) => {\n  const { values } = useFormState();\n  const { current } = useMultistepState();\n  const { register, deregister } = useMultistepApi();\n\n  const isCurrent = step === current;\n  const isRelevant = relevant ? relevant(values) : true;\n\n  const nextRef = useRef(next);\n  const prevRef = useRef(previous);\n  const relevantRef = useRef();\n  nextRef.current = next;\n  prevRef.current = previous;\n  relevantRef.current = relevant;\n\n  useState(() => {\n    register(\n      step,\n      {\n        name: step,\n        getNext: () => nextRef.current,\n        getPrevious: () => prevRef.current\n      },\n      true\n    );\n  });\n\n  useEffect(\n    () => {\n      register(step, {\n        name: step,\n        getNext: () => nextRef.current,\n        getPrevious: () => prevRef.current\n      });\n      return () => {\n        deregister(step);\n      };\n    },\n    [step]\n  );\n\n  const render = children => {\n    return (\n      <MultistepStepContext.Provider\n        value={{\n          relevant: params =>\n            relevantRef.current ? relevantRef.current(params) : true,\n          multistep: true\n        }}>\n        {isCurrent && isRelevant ? children : null}\n      </MultistepStepContext.Provider>\n    );\n  };\n\n  return {\n    isCurrent,\n    isRelevant,\n    step,\n    render\n  };\n};\n\nexport default useMultistepStep;\n","import React from 'react';\nimport useMultistep from '../hooks/useMultistep';\nimport useMultistepStep from '../hooks/useMultistepStep';\n\nexport default function Multistep({ children, ...props }) {\n  const { render, ...context } = useMultistep(props);\n\n  if (typeof children === 'function') {\n    return render(children(context));\n  }\n\n  return render(children);\n}\n\nMultistep.Step = function MultistepStep({ children, ...props }) {\n  const { render } = useMultistepStep(props);\n  return render(children);\n};\n","import React, { useContext } from 'react';\nimport useFormApi from '../hooks/useFormApi';\nimport { computeFieldFromProperty, getSchemaPathFromJsonPath } from '../utils';\nimport ObjectMap from '../ObjectMap';\nimport { FormRegisterContext } from '../Context';\n\nconst FormField = ({ field }) => {\n  // Get the field map off the forms context\n  const { fieldMap } = useContext(FormRegisterContext);\n\n  // Grab the form api ( we need it to get the actual field name because might be in scope )\n  const { getFullField, getOptions } = useFormApi();\n\n  // Grab the full field\n  const fullField = getFullField(field);\n\n  // Grap the schema\n  const { schema } = getOptions();\n\n  // First find property from the schema via the path to that field\n\n  // Examples\n  // field = \"name\" ---> properties.name\n  // field = \"brother.name\" ---> properties.brother.properties.name\n  // field = \"brother.siblings[1].friend.name\" ---> properties.brother.properties.siblings.items[1].properties.friend.properties.name\n  const path = getSchemaPathFromJsonPath(fullField);\n  const property = ObjectMap.get(schema, path);\n\n  // If property was not found return null\n  if (!property) {\n    return null;\n  }\n\n  // Next compute the field from property\n  const schemaField = computeFieldFromProperty(field, property);\n\n  const { props, componentType } = schemaField;\n\n  const Component = fieldMap[componentType];\n\n  return <Component field={field} {...props} />;\n};\n\nexport default FormField;\n","import React from 'react';\nimport useFormApi from '../hooks/useFormApi';\nimport FormFields from './FormFields';\n\nconst SchemaFields = () => {\n  const { getOptions } = useFormApi();\n\n  // Grap the schema\n  const { schema } = getOptions();\n\n  return <FormFields schema={schema} />;\n};\n\nexport default SchemaFields;\n","import React from 'react';\nimport { FormApiContext } from '../Context';\n\nconst withFormApi = Component =>\n  React.forwardRef((props, ref) => (\n    <FormApiContext.Consumer>\n      {(formApi) => <Component formApi={formApi} ref={ref} {...props} />}\n    </FormApiContext.Consumer>\n  ));\n\nexport default withFormApi;\n","import React from 'react';\nimport { FormStateContext } from '../Context';\n\nconst withFormState = Component =>\n  React.forwardRef((props, ref) => (\n    <FormStateContext.Consumer>\n      {(formState) => (\n        <Component formState={formState} ref={ref} {...props} />\n      )}\n    </FormStateContext.Consumer>\n  ));\n\nexport default withFormState;\n","import React, { useMemo, useContext } from 'react';\nimport useFormApi from './useFormApi';\nimport { FormRegisterContext } from '../Context';\n\nconst buildFieldApi = (formApi, field) => {\n\n  return { \n    // TODO refactor to use field api from updater.. need to make sure this \n    // will be stable\n    getValue: () => formApi.getValue(field),\n    setValue: value => formApi.setValue(field, value),\n    getTouched: () => formApi.getTouched(field),\n    setTouched: value => formApi.setTouched(field, value),\n    getError: () => formApi.getError(field),\n    setError: value => formApi.setError(field, value),\n    reset: () => formApi.resetField(field),\n    validate: () => formApi.validateField(field), \n    exists: () => formApi.fieldExists(field)\n  };\n};\n\nfunction useFieldApi( field ) {\n  const formApi = useFormApi();\n\n  const fieldApi = useMemo( () => buildFieldApi( formApi, field ), [field] );\n  return fieldApi;\n}\n\nexport default useFieldApi;\n","import React from 'react';\nimport useFieldApi from './useFieldApi';\nimport useFormState from './useFormState';\n\nconst buildFieldState = (fieldApi) => {\n  return {\n    value: fieldApi.getValue(),\n    touched: fieldApi.getTouched(),\n    error: fieldApi.getError(),\n  };\n};\n\nfunction useFieldState( field ) {\n  const fieldApi = useFieldApi(field);\n  // TODO find better way to get this to rerender\n  const formState = useFormState();\n  // The above is a temp hack\n  const fieldState = buildFieldState(fieldApi);\n  return fieldState;\n}\n\nexport default useFieldState;\n","import React from 'react';\nimport useFieldState from '../hooks/useFieldState';\n\nconst withFieldState = field => Component => props => {\n  const fieldState = useFieldState(field);\n  return <Component fieldState={fieldState} {...props} />;\n};\n\nexport default withFieldState;","import React from 'react';\nimport useFieldApi from '../hooks/useFieldApi';\n\nconst withFieldApi = field => Component => (props) => {\n  const fieldApi = useFieldApi( field );\n  return <Component fieldApi={fieldApi} {...props} />;\n};\n\nexport default withFieldApi;\n","import React from 'react';\n\nconst Option = ({ value, forwardedRef, children, ...rest }) => {\n  return (\n    <option ref={forwardedRef} value={value} key={value} {...rest}>\n      {children}\n    </option>\n  );\n};\n\nexport default Option;\n","import Form from './components/Form';\nimport Scope from './components/Scope';\nimport ArrayField from './components/ArrayField';\nimport FormProvider from './components/FormProvider';\nimport FormState from './components/FormState';\nimport Relevant from './components/Relevant';\nimport Multistep from './components/Multistep';\nimport FormField from './components/FormField';\nimport SchemaFields from './components/SchemaFields';\nimport FormFields from './components/FormFields';\nimport FormComponents from './components/FormComponents';\n\nimport withFormApi from './HOC/withFormApi';\nimport withFormState from './HOC/withFormState';\nimport withFieldState from './HOC/withFieldState';\nimport withFieldApi from './HOC/withFieldApi';\nimport withRadioGroup from './HOC/withRadioGroup';\nimport asField from './HOC/asField';\n\nimport useForm from './hooks/useForm';\nimport useField from './hooks/useField';\nimport useFieldApi from './hooks/useFieldApi';\nimport useFieldState from './hooks/useFieldState';\nimport useFormApi from './hooks/useFormApi';\nimport useFormState from './hooks/useFormState';\nimport useArrayField from './hooks/useArrayField';\nimport useMultistepApi from './hooks/useMultistepApi';\nimport useMultistepState from './hooks/useMultistepState';\nimport useArrayFieldApi from './hooks/useArrayFieldApi';\nimport useArrayFieldItemApi from './hooks/useArrayFieldItemApi';\nimport useCursorPosition from './hooks/useCursorPosition';\n\nimport Text from './components/form-fields/Text';\nimport Radio from './components/form-fields/Radio';\nimport TextArea from './components/form-fields/TextArea';\nimport Select from './components/form-fields/Select';\nimport Option from './components/form-fields/Option';\nimport Checkbox from './components/form-fields/Checkbox';\nimport RadioGroup from './components/form-fields/RadioGroup';\n\nimport { BasicText } from './components/form-fields/Text';\nimport { BasicRadio } from './components/form-fields/Radio';\nimport { BasicRadioGroup } from './components/form-fields/RadioGroup';\nimport { BasicTextArea } from './components/form-fields/TextArea';\nimport { BasicSelect } from './components/form-fields/Select';\nimport { BasicCheckbox } from './components/form-fields/Checkbox';\n\nimport * as utils from './utils';\n\nconst Input = Text;\n\nexport {\n  Form,\n  FormProvider,\n  withFormApi,\n  withFormState,\n  withFieldApi,\n  withFieldState,\n  withRadioGroup,\n  asField,\n  useForm,\n  useField,\n  useFieldApi,\n  useFieldState,\n  useFormApi,\n  useFormState,\n  useMultistepState,\n  useMultistepApi,\n  useArrayFieldApi,\n  useArrayFieldItemApi,\n  useCursorPosition,\n  Text,\n  Input,\n  Radio,\n  TextArea,\n  Select,\n  Option,\n  Checkbox,\n  RadioGroup,\n  BasicText,\n  BasicRadio,\n  BasicRadioGroup,\n  BasicTextArea,\n  BasicSelect,\n  BasicCheckbox,\n  Scope,\n  ArrayField,\n  useArrayField,\n  FormState,\n  Relevant,\n  Multistep,\n  FormField,\n  SchemaFields,\n  FormFields,\n  FormComponents,\n  utils\n};\n","module.exports = require(\"events\");","module.exports = require(\"react\");"],"sourceRoot":""}